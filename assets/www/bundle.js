/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./www/js/my-app.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./www/js/my-app.js":
/*!**************************!*\
  !*** ./www/js/my-app.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// Initialize app\nvar myApp = new Framework7({\n  // App id\n  id: 'com.myapp.test',\n  name: 'Almanara',\n  fastClicks:false,\n  pushState: true,\n  swipePanel: 'left',\n  animatePages:true,\n  animateNavBackIcon:true,\n  precompileTemplates: true, //\n  template7Pages: true ,\n  swipeBackPage:false,\n  swipePanelCloseOpposite:false,\n  swipePanelOnlyClose:false,\n  swipeout:true,\n  smartSelectPopupCloseTemplate: '',\n  smartSelectBackOnSelect: true,\n  cache: true, /* disable caching */\n  domCache: true ,//enable inline pages\n  cacheDuration:1000*60*10,\n  ignoreCache:true,\n  reloadPrevious:true,\n  // Enable swipe panel\n  panel: {\n    swipe: 'left',\n  },\n  statusbar: {\n    iosOverlaysWebview: true,\n  },\n\n    // ... other parameters\n});\n// If we need to use custom DOM library, let's save it to $$ variable:\nvar $$ = Dom7;\nvar loadingProduct = false;\nvar maxItemsProduct = 60;\nvar product_page=0;\nvar lastIndexProduct =0;\nvar loading = false;\nvar maxItems = 60;\nvar offer_page=0;\nvar lastIndex =0;\n// Append items per load\nvar itemsPerLoad = 20;\nvar myCalendar;\nvar userInfo;\n\nfunction onDeviceReady() {\n  // Now safe to use the Cordova API\n  //console.log('device Ready');\n\n  releaseApp();\n\n  ln.init();\n  checkConnection();\n  //setTimeout(function(){ ln.init(); }, 3000);\n  document.addEventListener(\"backbutton\", function(e){\n    myApp.closePanel();\n    if(myCalendar){\n      myCalendar.close();\n    }\n    if ( mainView.activePage.name === 'index') {\n      //window.location = \"#exitDialog\";\n      exitAppPopup();\n    }else{\n      myApp.closeModal('.picker-modal');\n      history.back();\n    };\n  });\n}\nfunction exitAppPopup() {\n  myApp.confirm('Do you really want to close this app?','Almanara',function () {\n    navigator.app.exitApp();\n  });\n    //return false;\n};\n\n// Handle Cordova Device Ready Event\ndocument.addEventListener('deviceready', onDeviceReady);\n// Add view\nvar mainView = myApp.addView('.view-main', {\n    // Because we want to use dynamic navbar, we need to enable it for this view:\n    dynamicNavbar: true\n});\nvar AppMainData={};\nvar Areas={};\nvar Branches={};\nvar AreasObj={};\nvar BranchesObj={};\n/*var Language=[\n   {'id':'en','language':'English','logo':'images/english.png'},\n   {'id':'ar','language':'Arabic','logo':'images/arabic.png'},\n   {'id':'in','language':'India','logo':'images/india.png'},\n   {'id':'ur','language':'Urdu','logo':'images/india.png'},\n   {'id':'be','language':'Bengali','logo':'images/india.png'},\n];\n*/\nfunction changeLaguage(){\n  var lang=window.localStorage.getItem(\"appLanguage\");\n  lang=JSON.parse(lang);\n  getAllLanguageData(lang,getLocalLanguage);\n\n}\nvar currentLang;\nfunction getLocalLanguage(lang){\n  for(var i=0;i< AppMainData.Language.length;i++){\n    if(lang.Language==AppMainData.Language[i].Id){\n      currentLang=AppMainData.Language[i];\n      displayLanguage();\n      mainView.router.loadPage('templates/slider.html');\n      break;\n    }\n  }\n}\nfunction displayLanguage()\n{\n  if(!currentLang){\n    console.log('AppMainData.Language',AppMainData.Language);\n    var lang=window.localStorage.getItem(\"appLanguage\");\n    lang=JSON.parse(lang);\n    for(var i=0;i< AppMainData.Language.length;i++){\n      if(lang.Language==AppMainData.Language[i].Id){\n        currentLang=AppMainData.Language[i];\n        break;\n      }\n    }\n\n  }\n  if(currentLang){\n    var languageName=currentLang.NameEn.toLowerCase();\n\n  }\n  //console.log(languageName);\n  ln.getLanguage(\n    {\n      //Default values\n      value: languageName\n    }\n  );\n  var message = i18n.t\n  (\n    'messages.success',\n    {\n      code: ln.language.code,\n      local: ln.language.local,\n      language: ln.language.international\n    }\n  );\n//  console.log(message);\n  //getAllLanguageData(currentLang.Id);\n\n}\nfunction reinit(){\n  location.reload();\n}\nfunction drawMenu(){\n  var output=\"\";\n  var userData = window.localStorage.getItem(\"UserData\",userData);\n  userData=JSON.parse(userData);\n\n    output+=\"<ul class='list content-block'> \";\n\n        output+=\"<li class='navbar-inner profile_nav'>\";\n\n          output+=\"<div class='center sliding'>\";\n\n\n            output+=\"<div class='user_profile_img'>\";\n              output+=\"<div class='img' style='background-image:url(\"+userData.ProfileImage+\")'> </div>\"\n            output+=\"</div>\";\n\n            output+=\"<div class='u_data'>\";\n               output+=\"<div class='text_uppercase u_name'>\"+userData.FirstName+\" \"+userData.LastName+\"  </div>\";\n               output+=\"<div class='small'>\"+userData.Email+\"</div>\";\n            output+=\"</div>\";\n\n          output+=\"</div>\";\n\n        output+=\"</li>\";\n\n\n        output+=\"  <li>\";\n            output+=\"  <a class='item-link item-content' href='templates/user_profile.html'>\";\n              output+=\"   <div class='item-media'>\";\n              output+=\"      <img src='images/my_profile_icon.png'/>\";\n              output+=\"   </div>\";\n              output+=\"   <div class='item-inner' data-i18n='menu.Profile'> menu.Profile\";\n              output+=\"  </div>\";\n            output+=\" </a>\";\n         output+=\" </li>\";\n\n\n        output+=\"  <li>\";\n            output+=\"  <a class='item-link item-content' href='templates/settings.html'>\";\n              output+=\"   <div class='item-media'>\";\n              output+=\"      <img src='images/settings_icon.png'/>\";\n              output+=\"   </div>\";\n              output+=\"   <div class='item-inner' data-i18n='menu.Settings'> menu.Settings\";\n              output+=\"  </div>\";\n            output+=\" </a>\";\n         output+=\" </li>\";\n\n\n\n         output+=\"  <li>\";\n            output+=\"  <a class='item-link item-content' href='templates/contactus.html'>\";\n              output+=\"   <div class='item-media'>\";\n              output+=\"      <img src='images/contact_icon.png'/>\";\n              output+=\"   </div>\";\n              output+=\"   <div class='item-inner' data-i18n='menu.Contact'>menu.Contact\";\n              output+=\"  </div>\";\n            output+=\" </a>\";\n         output+=\" </li>\";\n\n\n\n         output+=\"  <li>\";\n            output+=\"  <a class='item-link item-content' href='templates/howitworks.html'>\";\n              output+=\"   <div class='item-media' >\";\n              output+=\"      <img src='images/ht.png'/>\";\n              output+=\"   </div>\";\n              output+=\"   <div class='item-inner'  data-i18n='menu.How'>menu.How\";\n              output+=\"  </div>\";\n            output+=\" </a>\";\n         output+=\" </li>\";\n\n\n\n         output+=\"  <li>\";\n            output+=\"  <a class='item-link item-content' href='templates/termsandconditions.html'>\";\n              output+=\"   <div class='item-media'>\";\n              output+=\"      <img src='images/terms_icon.png'/>\";\n              output+=\"   </div>\";\n              output+=\"   <div class='item-inner'  data-i18n='menu.term'> menu.term\";\n              output+=\"  </div>\";\n            output+=\" </a>\";\n         output+=\" </li>\";\n\n\n\n         output+=\"  <li>\";\n            output+=\"  <a class='item-link item-content'  href='templates/privacypolicy.html'>\";\n              output+=\"   <div class='item-media'>\";\n              output+=\"      <img src='images/privacy_icon.png'/>\";\n              output+=\"   </div>\";\n              output+=\"   <div class='item-inner' data-i18n='menu.Privacy'> menu.Privacy\";\n              output+=\"  </div>\";\n            output+=\" </a>\";\n         output+=\" </li>\";\n\n\n\n         output+=\"  <li>\";\n            output+=\"  <a class='item-link item-content'>\";\n              output+=\"   <div class='item-media'>\";\n              output+=\"      <img src='images/device.png'/>\";\n              output+=\"   </div>\";\n              output+=\"   <div class='item-inner' data-i18n='menu.Device'> menu.Device\";\n              output+=\"  </div>\";\n            output+=\" </a>\";\n         output+=\" </li>\";\n\n         output+=\"  <li>\";\n            output+=\"  <a class='item-link item-content' href='#' onClick='logout()' >\";\n              output+=\"   <div class='item-media'>\";\n              output+=\"      <img src='images/logout.png'/>\";\n              output+=\"   </div>\";\n              output+=\"   <div class='item-inner' data-i18n='menu.Logout'>menu.Logout \";\n              output+=\"  </div>\";\n            output+=\" </a>\";\n         output+=\" </li>\";\n    output+=\"</div>\";\n  $$('.panel.panel_content.menu').html(output);\n}\nfunction logout(){\n  userInfo=null;\n  window.localStorage.removeItem(\"User\");\n  window.localStorage.removeItem(\"UserData\");\n  mainView.router.loadPage('index.html');\n}\nfunction triggerForm(){\n  $$('#profile_edit_form').submit();\n}\nfunction drawNavbarprofile(userData){\n  if(userData.ProfileImage){\n    $$('.user_profile_img .img').attr('style','background-image:url('+userData.ProfileImage+')');\n  }\n  $$('.u_name').html(userData.FirstName+\" \"+userData.LastName);\n  $$('.u_email').html(userData.Email);\n}\n\n\n function readURL1(input) {\n            if (input.files && input.files[0]) {\n                var reader = new FileReader();\n                reader.onload = function(e) {\n                    $('.user_profile_img .img').css('background-image', \"url(\" + e.target.result + \")\");\n                   //$('#the_user_img').attr('src', e.target.result) .width(150)\n\n                };\n                reader.readAsDataURL(input.files[0]);\n            }\n        }\n\nfunction drawNavbarprofile1(userData){\n  if(userData.ProfileImage){\n    $$('.user_profile_img .img').attr('style','background-image:url('+userData.ProfileImage+')');\n  }\n  $$('.u_name').html(userData.FirstName+\" \"+userData.LastName);\n  $$('.u_email').html(userData.Email);\n}\n\nfunction drawNavbarMenuPageTitle(title , clr ,title2){\n  var output=\"\";\n  output+=\"<div class='navbar-inner \"+clr+\"'>\";\n  output+=\"<div class='left'>\";\n    output+=\"<a href='#' class='link icon-only open-panel'><img src='images/left_menu.png'/></a>\";\n\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'>\"+title+\"</div>\";\n      output+=\"<div class='right'>\";\n           output+=title2;\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n}\n\n\nmyApp.onPageBeforeAnimation('redeem_landing',function(e){\n    var output=\"\";\n      output+=\"<div class='col-100 row items_center auto-view redeem_item'>\";\n         output+=\"<div class='row col-100 text-center'>\";\n             output+=\"<span class='col-100 mb-10' data-i18n='redeem.title'> redeem.title </span>\";\n             output+=\"<img class='img-fluid' src='images/panasonic.png' />\";\n         output+=\"</div>\";\n      output+=\"</div>\";\n\n\n\n      output+=\"<a   href='templates/gifts.html' class='col-100 row items_center auto-view redeem_item'>\";\n         output+=\"<div class='col-50 text-center'>\";\n             output+=\"<span class='col-100 row ' data-i18n='redeem.Gifts'> redeem.Gifts </span>\";\n         output+=\"</div>\";\n         output+=\"<div class='col-50 text-center'>\";\n                  output+=\"<img class='img-fluid' src='images/test/gifts.png'>\";\n         output+=\"</div>\";\n      output+=\"</a>\";\n\n\n      output+=\"<a  href='templates/vouchers.html'  class='col-100 row items_center auto-view redeem_item'>\";\n         output+=\"<div class='col-50 text-center'>\";\n             output+=\"<span class='col-100 row ' data-i18n='redeem.Vouchers' > redeem.Vouchers </span>\";\n         output+=\"</div>\";\n         output+=\"<div class='col-50 text-center'>\";\n                  output+=\"<img class='img-fluid' src='images/test/vouchers.png'>\";\n         output+=\"</div>\";\n      output+=\"</a>\";\n\n   $$(mainView.activePage.container).find('.redeem_landing').html(output);\n\n});\n\nfunction getGiftsServices(callback){\n  var language=currentLang.Id;\n  var userData = window.localStorage.getItem(\"UserData\");\n  userData=JSON.parse(userData);\n\n  var url=baseUrlMain+'ManageCustomer/GetAllUserGifts?UserId='+userData.Id+'&LanguageId='+language;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //  hideLoader();\n        if(callback){\n      //    console.log('gifts',data.Data);\n\n          callback(data.Data);\n        }\n      }\n  });\n\n}\n\nfunction drawGifts(data){\n  var last_gifts=data.GiftList[data.GiftList.length-1];\n  output+=\"<div class='text-left'>\";\n      output+=\"You have <span class='totalWalt'> \"+data.totalWalt+\"</span> <span data-i18n='vouchers.Watts'> vouchers.Watts</span>\";\n    output+=\"</div>\";\n    if(last_gifts&&last_gifts.expire_date){\n      var d = new Date(last_gifts.expire_date);\n      var date = d.getDate()+'/'+d.getMonth()+'/'+d.getFullYear();\n\n    }else{\n      var date=\"\";\n    }\n\n\n  var output=\"\";\n  output+=\"<div class='row'>\";\n   output+=\"<div class='fixed_bar two_sides_bar red_bar col-100 row '>\";\n\n     output+=\"<div class='text-left'>\";\n         output+=\"<span data-i18n='gifts.have'>gifts.have </span> <span class='totalWalt'> \"+last_gifts.walts+\"</span><span data-i18n='gifts.Watts'> gifts.Watts</span>\";\n       output+=\"</div>\";\n\n      output+=\"<div class='text-right two_lines'>\";\n           output+=last_gifts.walts+\" Watts\";\n           output+=\" <span class='line_2'> <span data-i18n='gifts.expire'>gifts.expire </span>\"+date+\"</span>\";\n\n       output+=\"</div>\";\n    output+=\"</div>\";\n   output+=\"</div>\";\n\n\n\nfor(var i=0;i<data.GiftList.length;i++){\n      var gift=data.GiftList[i];\n      var d = new Date(gift.expire_date);\n      var dates = d.getDate()+'/'+d.getMonth()+'/'+d.getFullYear();\n\n\n     output+=\"<div class='row col-100 items_stretch auto-view transactions_item redeem_item gift_\"+gift.id+\"'>\";\n        output+=\"<div class='col-40 text-center '>\";\n            output+=\"<div class='watts_count_inner'>\";\n                   output+=\"<img src='\"+gift.image+\"' class='img-fluid'/>\";\n           output+=\"</div>\";\n        output+=\"</div>\";\n        output+=\"<div class='col-60  align_self_center row des_side '>\";\n            output+=\"<div class='col-100 '>\";\n                 output+=\"<h3 class='my-0' >\"+gift.name+\" </h3>\";\n            //     output+=\"<h3 class='my-0' data-i18n='gifts.get'>gifts.get </h3>\";\n                 output+=\"<div class='mb-10  gray_clr s_small'>\"+gift.description+\"</div>\";\n            output+=\"</div>\";\n\n            output+=\"<div class='col-100 '>\";\n                 output+=\"<div class='mb-10  red_clr s_small'>\"+gift.walts+\" <span data-i18n='gifts.Watts'> gifts.Watts</span></div>\";\n            output+=\"</div>\";\n\n           output+=\"<div class='align_items_center row col-100 '>\";\n                output+=\"<div class='text-left small'>\"\n                   output+=\"<div class='col-100  row' data-i18n='gifts.Expite'>gifts.Expite</div>\";\n                   output+=\"<div class='col-100 gray_clr row'> \"+dates+\"</div>\";\n                output+=\"</div>\";\n                output+=\"<div class='text-right'>\"\n                   output+=\"<button class='link_btn btn-submit redeem_now'  data-i18n='gifts.redeem' onClick='redeemGift(\"+gift.id+\")'> gifts.redeem</button>\" ;\n                output+=\"</div>\";\n\n          output+=\"</div>\";\n        output+=\"</div>\";\n     output+=\"</div>\";\n}\n\n\n  $$(mainView.activePage.container).find('.gifts').html(output);\n\n}\nmyApp.onPageBeforeAnimation('gifts',function(e){\n  getGiftsServices(drawGifts);\n\n});\nfunction getVoucherServices(callback){\n  var language=currentLang.Id;\n  var userData = window.localStorage.getItem(\"UserData\");\n  userData=JSON.parse(userData);\n\n  var url=baseUrlMain+'ManageCustomer/GetAllUserVouchers?UserId='+userData.Id+'&LanguageId='+language;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //  hideLoader();\n        if(callback){\n      //    console.log('voucher',data.Data);\n          callback(data.Data);\n        }\n      }\n\n  });\n\n}\nmyApp.onPageBeforeAnimation('vouchers',function(e){\n   getVoucherServices(drawVoucherPage);\n\n\n});\nfunction redeemVoucher(id){\n  var userData = window.localStorage.getItem(\"UserData\",userData);\n  userData=JSON.parse(userData);\n  var url=baseUrlMain+'ManageCustomer/RedeemVoucher';\n  var data=\"UserId=\"+userData.Id+\"&VoucherId=\"+id+\"\";\n\n//  var data={'UserId':userData.Id,'VoucherId':id};\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'POST',\n    data:data,\n    success: function ( data ) {\n  //    console.log(data);\n      if(data.Data&&data.Data.Status==200){\n      $$('.voucher_'+id).remove();\n      //data = JSON.parse(data);\n\n\n       }\n    }\n  });\n\n}\nfunction redeemGift(id){\n  var userData = window.localStorage.getItem(\"UserData\",userData);\n  userData=JSON.parse(userData);\n  var url=baseUrlMain+'ManageCustomer/RedeemGift';\n  var data=\"UserId=\"+userData.Id+\"&GiftId=\"+id+\"\";\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'POST',\n    data:data,\n    success: function ( data ) {\n    //  console.log(data);\n      if(data.Data&&data.Data.Status==200){\n      $$('.gift_'+id).remove();\n      //data = JSON.parse(data);\n\n\n       }\n    }\n  });\n\n}\nfunction drawVoucherPage(data){\n  var output=\"\";\n  output+=\"<div class='row'>\";\n   output+=\"<div class='fixed_bar two_sides_bar red_bar col-100 row '>\";\n     var last_voucher=data.VoucherList[data.VoucherList.length-1];\n     output+=\"<div class='text-left'>\";\n         output+=\"You have <span class='totalWalt'> \"+data.totalWalt+\"</span> <span data-i18n='vouchers.Watts'> vouchers.Watts</span>\";\n       output+=\"</div>\";\n\n       if(last_voucher.expire_date&&last_voucher.expire_date){\n         var d = new Date(last_voucher.expire_date);\n         var date = d.getDate()+'/'+d.getMonth()+'/'+d.getFullYear();\n       }else{\n         date=\"\";\n       }\n\n      output+=\"<div class='text-right two_lines'>\";\n           output+=last_voucher.walts+\" Watts\";\n           output+=\" <span class='line_2'> <span data-i18n='vouchers.Expire'> vouchers.Expire </span>\"+date+\"</span>\";\n\n       output+=\"</div>\";\n    output+=\"</div>\";\n   output+=\"</div>\";\n\n\n\nfor(var i=0;i<data.VoucherList.length;i++){\n\n    var voucher=data.VoucherList[i];\n    var d = new Date(voucher.expire_date);\n     var dates = d.getDate()+'/'+d.getMonth()+'/'+d.getFullYear();\n\n     output+=\"<div class='row col-100 items_stretch auto-view transactions_item redeem_item voucher_\"+voucher.id+\"'>\";\n        output+=\"<div class='col-40 text-center watts_count_inner'>\";\n            output+=\"<div class='watts_inner'>\";\n            output+=\"<span class='col-100 row watts_count red_clr'>\"+voucher.walts+\" </span><span class='col-100 row watt' data-i18n='vouchers.Watts'>vouchers.Watts</span>\";\n           output+=\"</div>\";\n        output+=\"</div>\";\n        output+=\"<div class='col-60  align_self_center row des_side'>\";\n            output+=\"<div class='col-100 '>\";\n                 output+=\"<h3 class='my-0'>\"+voucher.name+\"</h3>\";\n                 output+=\"<div class='mb-10  gray_clr s_small'>\"+voucher.description+\"</div>\";\n            output+=\"</div>\";\n\n            output+=\"<div class='col-100 '>\";\n                 output+=\"<div class='mb-10  red_clr s_small' data-i18n='vouchers.kwatt'>\"+voucher.walts+\" vouchers.kwatt</div>\";\n            output+=\"</div>\";\n\n           output+=\"<div class='align_items_center row col-100 '>\";\n                output+=\"<div class='text-left small'>\"\n                   output+=\"<div class='col-100  row'  data-i18n='vouchers.Expite'>vouchers.Expite</div>\";\n                   output+=\"<div class='col-100 gray_clr row'> \"+dates+\"</div>\";\n                output+=\"</div>\";\n                output+=\"<div class='text-right'>\"\n                   output+=\"<button class='link_btn btn-submit redeem_now' data-i18n='vouchers.Redeem' onClick=(redeemVoucher(\"+voucher.id+\"))>  vouchers.Redeem</button>\" ;\n                output+=\"</div>\";\n\n          output+=\"</div>\";\n        output+=\"</div>\";\n     output+=\"</div>\";\n}\n\n\n  $$(mainView.activePage.container).find('.vouchers').html(output);\n}\nfunction getMaterialId(id){\n  for(var i=0;i<AppMainData.MaritalStatus.length;i++){\n    if(AppMainData.MaritalStatus[i].Id==id){\n       return AppMainData.MaritalStatus[i].NameEn;\n      break;\n    }\n  }\n\n}\n\nfunction getCityById(id){\n  for(var i=0;i<AppMainData.City.length;i++){\n    if(AppMainData.City[i].Id==id){\n      return AppMainData.City[i].NameEn;\n      break;\n    }\n  }\n}\nmyApp.onPageAfterAnimation('user_profile',function(e){\n});\nmyApp.onPageBeforeAnimation('user_profile',function(e){\n  var userData = window.localStorage.getItem(\"UserData\");\n  userData=JSON.parse(userData);\n  drawNavbarprofile1(userData);\n    var output=\"\";\n\n    output+=\"<div class='item mb-20'>\";\n        output+=\"<div class='small gray_clr' data-i18n='user_profile.first'> user_profile.first </div>\";\n        output+=\"<div class=''> \"+userData.FirstName+\"  </div>\";\n    output+=\"</div>\";\n\n    output+=\"<div class='item mb-20'>\";\n        output+=\"<div class='small gray_clr' data-i18n='user_profile.last'>user_profile.last </div>\";\n        output+=\"<div class=''>  \"+userData.LastName+\"   </div>\";\n    output+=\"</div>\";\n\n\n    output+=\"<div class='item mb-20'>\";\n        output+=\"<div class='small gray_clr' data-i18n='user_profile.Mobile'> user_profile.Mobile  </div>\";\n        output+=\"<div class=''> \"+userData.Phone+\"  </div>\";\n    output+=\"</div>\";\n\n    output+=\"<div class='item mb-20'>\";\n        output+=\"<div class='small gray_clr' data-i18n='user_profile.Email'> user_profile.Email </div>\";\n        output+=\"<div class=''> \"+userData.Email+\"  </div>\";\n    output+=\"</div>\";\n\n\n    output+=\"<div class='item mb-20'>\";\n        output+=\"<div class='small gray_clr' data-i18n='user_profile.Residency'>user_profile.Residency </div>\";\n        output+=\"<div class=''>  \"+userData.ResidencyId+\"  </div>\";\n    output+=\"</div>\";\n    var d = new Date(userData.BirthDate);\n     var date = d.getDate()+'/'+d.getMonth()+'/'+d.getFullYear();\n\n    output+=\"<div class='item mb-20'>\";\n        output+=\"<div class='small gray_clr' data-i18n='user_profile.Birth'>user_profile.Birth </div>\";\n        output+=\"<div class=''> \"+date+\" </div>\";\n    output+=\"</div>\";\n\n\n\n    output+=\"<div class='item mb-20'>\";\n        output+=\"<div class='small gray_clr' data-i18n='user_profile.City'> user_profile.City   </div>\";\n        output+=\"<div class=''>  \"+getCityById(userData.CityId)+\"  </div>\";\n    output+=\"</div>\";\n\n    output+=\"<div class='item mb-20'>\";\n        output+=\"<div class='small gray_clr' data-i18n='user_profile.Marital'>user_profile.Marital </div>\";\n        output+=\"<div class=''> \"+getMaterialId(userData.MaterialStatusId)+\"  </div>\";\n    output+=\"</div>\";\n  $$(mainView.activePage.container).find('.user_profile').html(output);\n})\n\nfunction draweditProfileForm(){\n  var userData = window.localStorage.getItem(\"UserData\",userData);\n  userData=JSON.parse(userData);\n    var output='';\n    //output+=\"<form method='post' class='ajax-submit col-90 auto-view row first_item' id='register_form '>\";\n    output+= \"<input type='hidden' name='Id' value='\"+userData.Id+\"'>\";\n    output+= \"<input type='hidden' name='Image' value='\"+userData.ProfileImage+\"'>\";\n    output+= \"<input type='hidden' name='Password' value='\"+userData.Password+\"'>\";\n   output+= \"<div class='item-input-wrap row col-100 profile_edit_form_FirstName_parent'>\";\n     output+= \"<input type='text' name='FirstName' id='profile_edit_form_FirstName' data-i18n='[placeholder]editProfile.First'  class='input_text  col-90' value='\"+userData.FirstName+\"'>\";\n     output+=\"<span class='col-90 input-clear-button'></span>\";\n   output+=\"</div>\";\n   output+= \"<div class='item-input-wrap row col-100 profile_edit_form_LastName_parent'>\";\n     output+= \"<input type='text' name='LastName' id='profile_edit_form_LastName'  data-i18n='[placeholder]editProfile.Last'  class='input_text  col-90' value='\"+userData.LastName+\"'>\";\n  //   output+= \"<input type='hidden' name='ProfileImage' id='' placeholder='' class='input_text  col-90' value='\"+userData.avatar+\"'>\";\n     output+=\"<span class='col-90 input-clear-button'></span>\";\n   output+=\"</div>\";\n\n   output+= \"<div class='item-input-wrap row col-100 profile_edit_form_Email_parent'>\";\n     output+= \"<input type='email' name='Email' id='profile_edit_form_Email'  data-i18n='[placeholder]editProfile.Email' class='input_text  col-90' value='\"+userData.Email+\"'>\";\n     output+=\"<span class='col-90 input-clear-button'></span>\";\n   output+=\"</div>\";\n\n   output+= \"<div class='item-input-wrap row col-100 profile_edit_form_Phone_parent'>\";\n     output+= \"<input type='tel' name='Phone' id='profile_edit_form_Phone' data-i18n='[placeholder]editProfile.Phone'  class='input_text  col-90' value='\"+userData.Phone+\"'>\";\n     output+=\"<span class='col-90 input-clear-button'></span>\";\n   output+=\"</div>\";\n\n   output+= \"<div class='item-input-wrap row col-100 profile_edit_form_residency_id_parent'>\";\n     output+= \"<input type='number' name='ResidencyId' id='profile_edit_form_residency_id' data-i18n='[placeholder]editProfile.Residency' class='input_text  col-90' value='\"+userData.ResidencyId+\"'>\";\n     output+=\"<span class='col-90 input-clear-button'></span>\";\n   output+=\"</div>\";\n\n   output+= \"<div class='item-input-wrap row col-100 profile_edit_form_city_parent'>\";\n      output+=\"<a href='#' class='item-link smart-select select-style bg_input col-90' data-open-in='picker'  data-back-on-select='true'>\"; //2018_10_14 add col-90\n       output+=\"   <select name='CityId' id='profile_edit_form_City'>\";\n        output+=\"     <option value=''  data-i18n='editProfile.Select' >editProfile.Select </option>\";\n        var selected='';\n        var val='Select';\n          for(var i=0;i<AppMainData.City.length;i++){\n            if(AppMainData.City[i].Id==userData.CityId){\n               val=AppMainData.City[i].NameEn;\n              selected='selected';\n            }\n            output+=\"<option value='\"+AppMainData.City[i].Id+\"' \"+selected+\">\"+AppMainData.City[i].NameEn+\"</option>\";\n          }\n       output+=\"   </select>\";\n       output+=\"   <div class='item-content'>\";\n       output+=\"     <div class='item-inner'>\";\n       output+=\"  <div class='item-after smart-select-value'>\"+val+\"</div>\";\n       output+=\"     </div>\";\n       output+=\"   </div>\";\n     output+=\" </a>\";\n     output+=\"<span class='col-90 input-clear-button'></span>\";\n   output+=\"</div>\";\n   var d = new Date(userData.BirthDate);\n    var date =d.getFullYear()+'-'+d.getMonth()+'-'+d.getDate();\n\n   output+= \"<div class='item-input-wrap row col-100 profile_edit_form_BirthDate_parent'>\";\n      output+= \"<input type='text' name='BirthDate' id='profile_edit_form_BirthDate'  data-i18n='[placeholder]editProfile.Birth'   class='input_text  col-90'  value='\"+date+\"'>\";\n     output+=\"<span class='col-90 input-clear-button'></span>\";\n   output+=\"</div>\";\n\n   output+= \"<div class='item-input-wrap row col-100 profile_edit_form_MaritalStatus_parent'>\";\n      output+=\"<a href='#' class='item-link smart-select select-style bg_input col-90' data-open-in='picker'  data-back-on-select='true'>\"; //2018_10_14 add col-90\n       output+=\"   <select name='MaterialStatusId' id='profile_edit_form_MaritalStatus'>\";\n        output+=\"     <option value=''   data-i18n='editProfile.Select'  > editProfile.Select </option>\";\n        for(var i=0;i<AppMainData.MaritalStatus.length;i++){\n          var selected='';\n          var val='Select';\n          if(AppMainData.MaritalStatus[i].Id==userData.MaterialStatusId){\n            selected='selected';\n            val=AppMainData.MaritalStatus[i].NameEn;\n          }\n          output+=\"<option value='\"+AppMainData.MaritalStatus[i].Id+\"' \"+selected+\">\"+AppMainData.MaritalStatus[i].NameEn+\"</option>\";\n        }\n       output+=\"   </select>\";\n       output+=\"   <div class='item-content'>\";\n       output+=\"     <div class='item-inner'>\";\n       output+=\"  <div class='item-after smart-select-value'>\"+val+\" </div>\";\n       output+=\"     </div>\";\n       output+=\"   </div>\";\n     output+=\" </a>\";\n     output+=\"<span class='col-90 input-clear-button'></span>\";\n   output+=\"</div>\";\n\n  return output;\n}\n\n\nmyApp.onPageBeforeAnimation('edit_user_profile',function(e){\n  var userData = window.localStorage.getItem(\"UserData\",userData);\n  userData=JSON.parse(userData);\n  drawNavbarprofile(userData);\n\n  $$(mainView.activePage.container).find('.edit_user_profile').html( draweditProfileForm());\n\n\n})\nfunction callPhone(tel){\n //window.open(tel,\"target=_system\");\n window.plugins.CallNumber.callNumber(onSuccess, onError, tel);\n\n}\nfunction onSuccess(){\n\n}\n\nfunction onError(){\n\n}\n\nmyApp.onPageAfterAnimation('speakToUs',function(e){\n//  console.log('AppMainData.ContactUs',AppMainData.ContactUs);\n  var output=\"\";\n  output+=\"<div class='list-block  col-90 text-center'>\";\n  output+=\"<h3>\"+AppMainData.ContactUs.Name+\"</h3>\";\n  output+=AppMainData.ContactUs.Description;\n  output+=\"</div>\";\n  output+=\"<div class='list-block  col-90 text-center'>\";\n  output+=AppMainData.ContactUs.Email;\n  output+=\"</div>\";\n  output+=\"<ul class='list-block row col-90'>\";\n        output+=\"  <li class='row col-100'>\";\n        output+=\"       <button class='link_btn external' onClick='callPhone(\"+AppMainData.ContactUs.Fax+\")' >  \"+AppMainData.ContactUs.Fax+\"  </button>\";\n        output+=\"  </li>\";\n        output+=\"  <li class='row col-100'>\";\n      output+=\"       <button class='link_btn external' onClick='callPhone(\"+AppMainData.ContactUs.Phone+\")' >  \"+AppMainData.ContactUs.Phone+\"  </button>\";\n        output+=\"  </li>\";\n\n/*        output+=\"  <li class='row col-100'>\";\n        output+=\"     <button class='link_btn'  data-i18n='title.speak'> title.speak  </button>\";\n        output+=\"  </li>\";\n*/      output+=\" </ul>\";\n  $$('.speakToUs').html(output);\n\n});\n\nmyApp.onPageAfterAnimation('edit_user_profile',function(e){\n\n  myCalendar = myApp.calendar({\n     input: '#profile_edit_form_BirthDate'\n });\n requires=['FirstName','LastName','Email','Phone','CityId','BirthDate','ResidencyId','MaterialStatusId','Password','ConfirmPassword'];\n formId='profile_edit_form';\n var urlReq=baseUrlMain+'ManageCustomer/UpdateCustomer'\n listnerEditProfileFormAction(urlReq);\n})\n\nfunction drawNavbarEmpty(){\n  $$('.navbar_content').html('');\n\n}\nfunction drawNavbarBack(){\n  var output=\"\";\n  output+=\"<div class='navbar-inner'>\";\n  output+=\"<div class='left'>\";\n  //  output+=\"<a href='#' class='link icon-only open-panel'><i class='icon icon-bars'></i></a>\";\n\n    output+=\"<a href='#' class='link back'>\";\n    output+=\"  <i class='fa fa-angle-left' aria-hidden='true'></i>\";\n    //output+=\"  <span>Back</span>\";\n    output+=\"</a>\";\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'></div>\";\n      output+=\"<div class='right'>\";\n      //  output+=\"<a href='#' class='link icon-only open-panel'><i class='icon icon-bars'></i></a>\";\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n}\nfunction drawNavbarRedBack(){\n  var output=\"\";\n  output+=\"<div class='navbar-inner red'>\";\n  output+=\"<div class='left'>\";\n  //  output+=\"<a href='#' class='link icon-only open-panel'><i class='icon icon-bars'></i></a>\";\n\n    output+=\"<a href='#' class='link back'>\";\n    output+=\"  <i class='fa fa-angle-left' aria-hidden='true'></i>\";\n    //output+=\"  <span>Back</span>\";\n    output+=\"</a>\";\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'></div>\";\n      output+=\"<div class='right'>\";\n      //  output+=\"<a href='#' class='link icon-only open-panel'><i class='icon icon-bars'></i></a>\";\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n}\nfunction drawNavbarMenuPage(title){\n  var output=\"\";\n  output+=\"<div class='navbar-inner gray'>\";\n  output+=\"<div class='left'>\";\n    output+=\"<a href='#' class='link icon-only open-panel'><img src='images/left_menu.png'/></a>\";\n\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'>\"+title+\"</div>\";\n      output+=\"<div class='right'>\";\n        output+=\"<a href='#' data-popup='.popup-cart' class='open-popup'><img src='images/card_icon.png'/> <img src='images/back_copy.png'/></a>\";\n      //  output+=\"<a href='#' class='link icon-only open-panel'><i class='icon icon-bars'></i></a>\";\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n}\nfunction drawNavbarMenuOnlyPage(title){\n  var output=\"\";\n  output+=\"<div class='navbar-inner gray'>\";\n  output+=\"<div class='left'>\";\n    output+=\"<a href='#' class='link icon-only open-panel'><img src='images/left_menu.png'/></a>\";\n\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'>\"+title+\"</div>\";\n      output+=\"<div class='right'>\";\n        //output+=\"<a href='#' data-popup='.popup-cart' class='open-popup'><img src='images/card_icon.png'/> <img src='images/back_copy.png'/></a>\";\n      //  output+=\"<a href='#' class='link icon-only open-panel'><i class='icon icon-bars'></i></a>\";\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n}\nfunction drawNavbarMenuBackPage(title){\n  var output=\"\";\n  output+=\"<div class='navbar-inner gray'>\";\n  output+=\"<div class='left'>\";\n    output+=\"<a href='#' class='link back'><img src='images/back.png'/></a>\";\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'>\"+title+\"</div>\";\n      output+=\"<div class='right'>\";\n      //  output+=\"<a href='#' class='link icon-only open-panel'><i class='icon icon-bars'></i></a>\";\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n}\n\nfunction drawNavbarMenuOfferPage(title,color){\n  var output=\"\";\n  output+=\"<div class='navbar-inner \"+color+\"'>\";\n  output+=\"<div class='left'>\";\n    output+=\"<a href='#' class='link icon-only open-panel'><img src='images/left_menu.png'/></a>\";\n\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'>\"+title+\"</div>\";\n      output+=\"<div class='right'>\";\n        output+=\"<a href='#' class='link icon-only open-panel'><img src='images/filtter.png'/></a>\";\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n}\n// Option 1. Using page callback for page (for \"about\" page in this case) (recommended way):\nmyApp.onPageInit('about', function (page) {\n  // Do something here for \"about\" page\n})\n// Option 2. Using one 'pageInit' event handler for all pages:\n$$(document).on('pageInit', function (e) {\n  // Get page data from event data\n  var page = e.detail.page;\n\n})\nmyApp.onPageBeforeAnimation('*',function(e){\n  $$('.page-on-left').removeClass('hidden');\n  myApp.closeModal('.picker-modal');\n  if(mainView.activePage.name!='index'){\n    displayLanguage();\n  }\n\n});\nfunction onError(error) {\n    brancheDistanceMap();\n\n    console.error(\"The following error occurred: \" + error);\n}\n\nfunction handleLocationAuthorizationStatus(cb, status) {\n    switch (status) {\n        case cordova.plugins.diagnostic.permissionStatus.GRANTED:\n            cb(true);\n            break;\n        case cordova.plugins.diagnostic.permissionStatus.NOT_REQUESTED:\n            requestLocationAuthorization(cb);\n            break;\n        case cordova.plugins.diagnostic.permissionStatus.DENIED:\n            cb(false);\n            break;\n        case cordova.plugins.diagnostic.permissionStatus.DENIED_ALWAYS:\n            // Android only\n            cb(false);\n            break;\n        case cordova.plugins.diagnostic.permissionStatus.GRANTED_WHEN_IN_USE:\n            // iOS only\n            cb(true);\n            break;\n    }\n}\n\nfunction requestLocationAuthorization(cb) {\n    cordova.plugins.diagnostic.requestLocationAuthorization(handleLocationAuthorizationStatus.bind(this, cb), onError);\n}\n\nfunction ensureLocationAuthorization(cb) {\n    cordova.plugins.diagnostic.getLocationAuthorizationStatus(handleLocationAuthorizationStatus.bind(this, cb), onError);\n}\n\nfunction requestLocationAccuracy(callback){\n   var recal=callback;\n    ensureLocationAuthorization(function(isAuthorized){\n        if(isAuthorized){\n            cordova.plugins.locationAccuracy.canRequest(function(canRequest){\n                if (canRequest) {\n                    cordova.plugins.locationAccuracy.request(function () {\n                        //    brancheDistanceMap();\n                        recal();\n\n                        }, function (error) {\n                            onError(\"Error requesting location accuracy: \" + JSON.stringify(error));\n                            if (error) {\n                                // Android only\n                                onError(\"error code=\" + error.code + \"; error message=\" + error.message);\n                                if (error.code !== cordova.plugins.locationAccuracy.ERROR_USER_DISAGREED) {\n                                    if (window.confirm(\"Failed to automatically set Location Mode to 'High Accuracy'. Would you like to switch to the Location Settings page and do this manually?\")) {\n                                        cordova.plugins.diagnostic.switchToLocationSettings();\n                                    }\n                                }\n                            }\n                        }, cordova.plugins.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY // iOS will ignore this\n                    );\n                } else {\n                    // On iOS, this will occur if Location Services is currently on OR a request is currently in progress.\n                    // On Android, this will occur if the app doesn't have authorization to use location.\n                    onError(\"Cannot request location accuracy\");\n                }\n            });\n        }else{\n            onError(\"User denied permission to use location\");\n        }\n    });\n    recal();\n\n}\n\nmyApp.onPageAfterAnimation('*',function(e){\n  //console.log('onPageBeforeAnimation',mainView.activePage.name);\n  /*  // drawNavbarBack();\n  //drawMenu();\n  */\n  if(mainView.activePage.name!='index'){\n    displayLanguage();\n  }\n\n\n  if(map_distance){\n    map_distance.clear();\n  }\n  if(map){\n    map.clear();\n  }\n  myApp.closePanel();\n  $$('.page-on-left').removeClass('hidden');\n\n  if(mainView.activePage.name==='show_profile'||mainView.activePage.name==='offers'||mainView.activePage.name==='products'||mainView.activePage.name==='gifts'||mainView.activePage.name==='redeem_landing'||mainView.activePage.name==='vouchers'||mainView.activePage.name==='user_profile'){\n    drawMenu();\n  }\n  myApp.params.swipePanel = false;\n  if(mainView.activePage.name==='branches'||mainView.activePage.name==='branch_details'||mainView.activePage.name==='branch_distance'||mainView.activePage.name==='brnches_map'||mainView.activePage.name==='show_profile'||mainView.activePage.name==='offers'||mainView.activePage.name==='products'||mainView.activePage.name==='transactions'||mainView.activePage.name==='product_details'||mainView.activePage.name==='notifications'||mainView.activePage.name==='gifts'||mainView.activePage.name==='vouchers'||mainView.activePage.name==='redeem_landing'){\n    toolbar();\n  }else{\n    HideToolbar();\n  }\n\n});\n\n/*\n$$('.hide-navbar').on('click', function () {\n  app.navbar.hide('.navbar');\n});\n$$('.show-navbar').on('click', function () {\n  app.navbar.show('.navbar');\n});*/\n// Option 2. Using live 'pageInit' event handlers for each page\nmyApp.onPageInit('index',function(e){\n  //myApp.params.swipePanel = 'left';\n});\nmyApp.onPageBeforeAnimation('index',function(e){\n  //drawNavbarEmpty();\n  //drawIndex();\n  checkUser();\n  drawCountryLanguage();\n});\nmyApp.onPageBeforeAnimation('slider',function(e){\n  hideLoader();\n\n  // if(userInfo){\n  //   if(userInfo.ProfileImage){\n  //     mainView.router.loadPage('templates/show_profile.html');\n  //   }else{\n  //     mainView.router.loadPage('templates/profile.html');\n  //   }\n  // }\n/*  if(!AppMainData.Banners){\n    getBasicUrl(drawIndex);\n  }else{\n  }*/\n  drawIndex();\n});\nfunction checkConnection() {\n    var networkState = navigator.connection.type;\n    var states = {};\n    states[Connection.UNKNOWN]  = 'Unknown connection';\n    states[Connection.ETHERNET] = 'Ethernet connection';\n    states[Connection.WIFI]     = 'WiFi connection';\n    states[Connection.CELL_2G]  = 'Cell 2G connection';\n    states[Connection.CELL_3G]  = 'Cell 3G connection';\n    states[Connection.CELL_4G]  = 'Cell 4G connection';\n    states[Connection.CELL]     = 'Cell generic connection';\n    states[Connection.NONE]     = 'No network connection';\n    if(networkState==Connection.NONE){\n      $$('.connection-msg').addClass('showMsg');\n    }else{\n      $$('.connection-msg').removeClass('showMsg');\n    }\n}\n\n\n//Select language_country Page\n\n//Select language_country Page\nfunction drawCountryLanguage(){\n  hideLoader();\n  var output=\"\";\n  output+=\"<div class='row bg_country '  style='background-image:url(images/branch_1.jpeg)'>\";\n\n    output+=\"<div class='text_center margin-data col-100'>\";\n      output+= \"<img src='images/language_logo.png'/>\";\n  //    output+=\"<h2 class='txt_cover col-100'>Discover a world of rewards</h2>\";\n    output+=\"</div>\";\n\n    output+=\"<div class='col-90 flex_center center_block'>\";\n       output+=\"<form method='post' class='ajax-submit' id='main_form'>\";\n      output+= \"<div class='item-input-wrap main_form_language_parent'>\";\n         output+=\"<a href='#' class='item-link smart-select select-style' data-open-in='picker'  data-back-on-select='true'>\";\n          output+=\"   <select name='language' id='main_form_language'>\";\n          output+=\" <option value='' >Select </option>\";\n             for(var i=0;i< AppMainData.Language.length;i++){\n          //      output+=\" <option value='\"+AppMainData.Language[i].id+\"' data-option-image='\"+AppMainData.Language[i].logo+\"'>\"+Language[i].language+\"</option>\";\n                output+=\" <option value='\"+AppMainData.Language[i].Id+\"' data-option-image='\"+AppMainData.Language[i].Image+\"'>\"+AppMainData.Language[i].NameEn+\"</option>\";\n             }\n          output+=\"   </select>\";\n          output+=\"   <div class='item-content'>\";\n          output+=\"     <div class='item-inner'>\";\n          output+=\"  <div class='item-after smart-select-value'>Select Your Language</div>\";\n          output+=\"     </div>\";\n          output+=\"   </div>\";\n        output+=\" </a>\";\n        output+=\"<span class='input-clear-button'></span>\";\n      output+=\"</div>\";\n      output+= \"<div class='item-input-wrap main_form_country_parent'>\";\n        output+=\"<a href='#' class='item-link smart-select select-style' data-open-in='picker' data-back-on-select='true' >\";\n            output+=\"   <select name='country' id='main_form_country'> \";\n            output+=\" <option value='' >Select </option>\";\n            for(var i=0;i<AppMainData.Country.length;i++){\n              output+=\"     <option value='\"+AppMainData.Country[i].Id+\"' > +\"+AppMainData.Country[i].Code+\" \"+AppMainData.Country[i].NameEn+\"</option>\";\n            }\n            output+=\"   </select>\";\n            output+=\"   <div class='item-content'>\";\n            output+=\"     <div class='item-inner'>\";\n            output+=\"  <div class='item-after smart-select-value'>Select Your Country</div>\";\n            output+=\"     </div>\";\n            output+=\"   </div>\";\n          output+=\" </a>\";\n        output+=\"<span class='input-clear-button'></span>\";\n      output+=\"</div>\";\n      output+= \"<div class='item-input-wrap'>\";\n         output+=\" <input type='submit' name='submit' value='GET STARTED' class='btn-submit'>\";\n      output+=\"</div>\";\n       output+=\"</form>\";\n    output+=\"</div>\";\n//    output+=\"<div class='bottom_bar'></div>\";\n  output+=\"</div>\";\n  $$(mainView.activePage.container).find('.index').html(output);\n eventListnerLanguage();\n\n}\nmyApp.onPageBeforeAnimation('language_country',function(e){\n  checkUser();\n  if(AppMainData){\n    drawCountryLanguage();\n  }\n});\nvar requires,formId;\nmyApp.onPageAfterAnimation('language_country',function(e){\n  requires=['language','country'];\n  formId='main_form';\n  LanguageFormAction();\n});\nfunction eventListnerLanguage(){\n  requires=['language','country'];\n  formId='main_form';\n  LanguageFormAction();\n}\nfunction LanguageFormAction(){\n  $$('#'+formId).on('submit', submitLang);\n//  $$('#'+formId).off('submit', submitLang);\n}\nfunction submitLang(e){\n     if(checkRequires(requires,formId)){\n       $$('#'+formId).find('.input-clear-button').html('');\n       var appLanguage={\n                'Language':$$('#'+formId +' #'+formId+'_language').val(),\n                'Country':$$('#'+formId +' #'+formId+'_country').val(),\n              }\n\n       appLanguage=JSON.stringify(appLanguage);\n      // console.log('applang',appLanguage);\n       window.localStorage.setItem(\"appLanguage\",appLanguage);\n      changeLaguage();\n\n   }\n  //  e.preventDefault();\n    return false;\n}\n/*function goToLang(){\n  showLoader();\n  getBasicUrl(langLoad);\n\n}\nfunction langLoad(){\n\n  mainView.router.loadPage('templates/language_country.html');\n}\n*/\nfunction isEmptyOrSpaces(str){\n    return str === null || str.match(/^ *$/) !== null;\n}\n\nfunction checkRequires(requires,formId){\n  var flag=true;\n $$('#'+formId).find('.input-clear-button').html('');\n  for(var i=0;i<requires.length;i++){\n  //   console.log(requires[i]);\n    if(!$$('#'+formId+' #'+formId+'_'+requires[i]).val()||isEmptyOrSpaces($$('#'+formId+' #'+formId+'_'+requires[i]).val())){\n       $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html('Data Required .');\n       flag=false;\n    }\n  }\n  return flag;\n}\nfunction checkRequiresValidation(requires,formId){\n  var flag=true;\n $$('#'+formId).find('.input-clear-button').html('');\n  for(var i=0;i<requires.length;i++){\n    if(!$$('#'+formId+' #'+formId+'_'+requires[i]).val()||isEmptyOrSpaces($$('#'+formId+' #'+formId+'_'+requires[i]).val())){\n       $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html('Data Required .');\n       flag=false;\n    }else {\n      if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-minLength')){\n        var val=parseInt($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-minLength'));\n        if($$('#'+formId+' #'+formId+'_'+requires[i]).val().length<val){\n          var error=$$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').text();\n          if(error){\n            error+='Min Length '+val;\n          }else{\n            error='Min Length '+val;\n          }\n          $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html(error);\n          flag=false;\n        }\n      }\n      if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-maxLength')){\n        var val=parseInt($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-maxLength'));\n        if($$('#'+formId+' #'+formId+'_'+requires[i]).val().length>val){\n          var error=$$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').text();\n          if(error){\n            error+='Max Length '+val;\n          }else{\n            error='Max Length '+val;\n          }\n          $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html(error);\n          flag=false;\n        }\n      }\n      if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-type')){\n        if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-type')=='email'){\n\n          var mailformat =/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/;\n          if(!$$('#'+formId+' #'+formId+'_'+requires[i]).val().trim().match(mailformat))\n          {\n            var error=$$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').text();\n            if(error){\n              error+='Invalide Email Formate';\n            }else{\n              error='Invalide Email Formate';\n            }\n            $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html(error);\n            flag=false;\n          }\n        }else if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-type')=='phone'){\n          var phoneno = /^\\d{9}$/;\n          if(!$$('#'+formId+' #'+formId+'_'+requires[i]).val().match(phoneno))\n          {\n            var error=$$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').text();\n            if(error){\n              error+='Invalide Phone Formate ';\n            }else{\n              error='Invalide Phone Formate ';\n            }\n            $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html(error);\n            flag=false;\n          }\n        }else if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-type')=='BirthDate'){\n          console.log($$('#'+formId+' #'+formId+'_'+requires[i]).val());\n          var date =$$('#'+formId+' #'+formId+'_'+requires[i]).val();\n          var d = new Date(date);\n          console.log(calculate_age(d.getMonth(), d.getDate(),d.getFullYear()));\n          if(calculate_age(d.getMonth(), d.getDate(),d.getFullYear())<18)\n          {\n            var error=$$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').text();\n            if(error){\n              error+='At least 18 years Old ';\n            }else{\n              error='At least 18 years Old';\n            }\n            $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html(error);\n            flag=false;\n          }\n        }else if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-type')=='Password'){\n          var regularExpression = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,25}$/;\n\n          if(!$$('#'+formId+' #'+formId+'_'+requires[i]).val().match(regularExpression))\n          {\n            var error=$$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').text();\n            if(error){\n              error+='Must Continue at least one of \"!@#$%^&*\" and \"Char\" And \"Number\"  ';\n            }else{\n              error+='Must Continue at least one of \"!@#$%^&*\" and \"Char\" And \"Number\"  ';\n            }\n            $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html(error);\n            flag=false;\n          }\n\n        }else if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-type')=='ConfirmPassword'){\n\n          var error=$$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').text();\n          var confirmPass=$$('#'+formId+' #'+formId+'_'+requires[i]).val();\n          var Pass=$$('#'+formId+' #'+formId+'_'+requires[i]).attr('mainType');\n          var  PassVal=$$('#'+formId+' #'+Pass).val();\n          if(confirmPass!==PassVal){\n            if(error){\n              error+='Password not like confirm password  ';\n            }else{\n              error+='Password not like confirm password ';\n            }\n            $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html(error);\n            flag=false;\n\n          }\n\n        }else if($$('#'+formId+' #'+formId+'_'+requires[i]).attr('data-type')=='Number'){\n          var regularExpression = /^\\d+$/;\n          if(!$$('#'+formId+' #'+formId+'_'+requires[i]).val().match(regularExpression))\n          {\n            var error=$$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').text();\n            if(error){\n              error+='Must Continue Number enough ';\n            }else{\n              error+='Must Continue Number enough ';\n            }\n            $$('#'+formId+' .'+formId+'_'+requires[i]+'_parent').find('.input-clear-button').html(error);\n            flag=false;\n          }\n\n        }\n\n      }\n\n    }\n\n  }\n  return flag;\n}\n\nfunction calculate_age(birth_month,birth_day,birth_year)\n{\n    today_date = new Date();\n    today_year = today_date.getFullYear();\n    today_month = today_date.getMonth();\n    today_day = today_date.getDate();\n    age = today_year - birth_year;\n\n    if ( today_month < (birth_month - 1))\n    {\n        age--;\n    }\n    if (((birth_month - 1) == today_month) && (today_day < birth_day))\n    {\n        age--;\n    }\n    return age;\n}\n\n\nfunction checkRequiresMobile(requires,formId){\n  var flag=true;\n  $$('#'+formId).find('.input-clear-button').html('');\n  for(var i=0;i<requires.length;i++){\n    if(!$$('#'+formId+' #'+formId+'_'+requires[i]).val()){\n  //    console.log(requires[i]);\n      if(requires[i]=='mobile'){\n        $$('#'+formId+' .verif_form_mobile_parent').find('.input-clear-button').html('<span data-i18n=\"req.valid\">req.valid</span>');\n\n      }else{\n        $$('#'+formId+' .verif_form_number_parent').find('.input-clear-button').html('<span data-i18n=\"req.right\">req.right</span>');\n\n      }\n       flag=false;\n    }\n  }\n  return flag;\n}\n\n//visitor Signup Or Register\nmyApp.onPageBeforeAnimation('visitor',function(e){\n  checkUser();\n  var output=\"\";\n  output+=\"<div class='row bg_cover go_login_select '  style='background-image:url(images/vistor_bg.jpg)'>\";\n\n    output+=\"<div class='text_center margin-data col-100'>\";\n      output+= \"<img src='images/language_logo.png'/>\";\n    output+=\"</div>\";\n\n    output+=\"<div class='row col-100 bottom-data'>\";\n      output+=\"<div class=' col-90 auto-view'>\";\n        output+=\"<a href='templates/login.html' class='link_btn' data-i18n='vistor.Memeber'>vistor.Memeber </a>\";\n      output+=\"</div>\";\n\n      output+=\"<div class=' col-100 row'>\";\n       output+=\"<div class='two_bars'><span class='white_color' data-i18n='vistor.Connect'>vistor.Connect</span></div>\";\n      output+=\"</div>\";\n\n      output+=\"<div class='col-90 row  no-gap social_btns auto-view'>\";\n        output+=\"<div class='col-50 text-center '><a href='#' onClick='loginWithFB()' class='white_color btn face_book_btn '><i class='fa fa-facebook'></i>Facebook</a></div>\";\n        output+=\"<div class='col-50 text-center '><a href='' class='white_color btn googleplus_btn '><img src='images/google.png'/></a></div>\";\n      output+=\"</div>\";\n\n      output+=\"<div class=' col-100 text-center go_sign_up'>\";\n      output+=\"<p><a class='white_color' href='templates/register.html' data-i18n='vistor.register'>vistor.register</a></p>\";\n\n\n\n      output+=\"</div>\";\n    output+=\"</div>\";\n\n  output+=\"</div>\";\n  $$(mainView.activePage.container).find('#visitor').html(output);\n});\nfunction drawRegisterForm(){\n\n  var user={};\n  if(window.localStorage.getItem(\"userData\")){\n    var userData=window.localStorage.getItem(\"userData\");\n    userData=JSON.parse(userData);\n    user.Email=  userData.email;\n    user.FirstName=  userData.name;\n  }else {\n    user.Email=  '';\n    user.FirstName=  '';\n\n  }\n  var output='';\n  //output+=\"<form method='post' class='ajax-submit col-90 auto-view row first_item' id='register_form '>\";\n output+= \"<div class='item-input-wrap row col-100 register_form_FirstName_parent'>\";\n   output+= \"<input type='text' value='\"+user.FirstName+\"' name='FirstName' id='register_form_FirstName' data-minLength='3' data-maxLength='25'  data-i18n='[placeholder]register.First'  class='input_text  col-90'>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n output+=\"</div>\";\n output+= \"<div class='item-input-wrap row col-100 register_form_LastName_parent'>\";\n   output+= \"<input type='text' name='LastName' id='register_form_LastName'   data-minLength='3' data-maxLength='25' data-i18n='[placeholder]register.Last'   class='input_text  col-90'>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n output+=\"</div>\";\n\n output+= \"<div class='item-input-wrap row col-100 register_form_Email_parent'>\";\n   output+= \"<input type='text' value='\"+user.Email+\"' name='Email' id='register_form_Email' data-type='email' data-i18n='[placeholder]register.Email'   class='input_text  col-90'>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n output+=\"</div>\";\n\n output+= \"<div class='item-input-wrap row col-100 register_form_Phone_parent'>\";\n   output+= \"<input type='tel' name='Phone' id='register_form_Phone' data-type='phone' data-i18n='[placeholder]register.Phone'   class='input_text  col-90'>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n output+=\"</div>\";\n\n output+= \"<div class='item-input-wrap row col-100 register_form_ResidencyId_parent'>\";\n   output+= \"<input type='number' name='ResidencyId' id='register_form_ResidencyId'  data-type='Number' data-i18n='[placeholder]register.Residency'  class='input_text  col-90'>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n output+=\"</div>\";\n\n output+= \"<div class='item-input-wrap row col-100 register_form_CityId_parent'>\";\n    output+=\"<a href='#' class='item-link smart-select select-style bg_input col-90' data-open-in='picker'  data-back-on-select='true'>\"; //2018_10_14 add col-90\n     output+=\"   <select name='CityId' id='register_form_CityId'>\";\n      output+=\"     <option value='' data-i18n='register.Select' >register.Select </option>\";\n        for(var i=0;i<AppMainData.City.length;i++){\n          output+=\"     <option value='\"+AppMainData.City[i].Id+\"' >\"+AppMainData.City[i].NameEn+\"</option>\";\n        }\n     output+=\"   </select>\";\n     output+=\"   <div class='item-content'>\";\n     output+=\"     <div class='item-inner'>\";\n     output+=\"  <div class='item-after smart-select-value'  data-i18n='register.City'>register.City</div>\";\n     output+=\"     </div>\";\n     output+=\"   </div>\";\n   output+=\" </a>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n output+=\"</div>\";\n\n output+= \"<div class='item-input-wrap row col-100 register_form_BirthDate_parent'>\";\n//     output+= \"<input type='tel' name='residency_id' id='register_form_residency_id' placeholder='Residency ID' class='input_text  col-90'>\";\n    output+= \"<input type='text' name='BirthDate'  data-type='BirthDate' id='register_form_BirthDate' data-i18n='[placeholder]register.Birth'  class='input_text  col-90'>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n output+=\"</div>\";\n\n output+= \"<div class='item-input-wrap row col-100 register_form_MaterialStatusId_parent'>\";\n    output+=\"<a href='#' class='item-link smart-select select-style bg_input col-90' data-open-in='picker'  data-back-on-select='true'>\"; //2018_10_14 add col-90\n     output+=\"   <select name='MaterialStatusId' id='register_form_MaterialStatusId'>\";\n     output+=\"     <option value='' data-i18n='register.Select' >register.Select </option>\";\n        for(var i=0;i<AppMainData.MaritalStatus.length;i++){\n          output+=\"     <option value='\"+AppMainData.MaritalStatus[i].Id+\"' >\"+AppMainData.MaritalStatus[i].NameEn+\"</option>\";\n        }\n     output+=\"   </select>\";\n     output+=\"   <div class='item-content'>\";\n     output+=\"     <div class='item-inner'>\";\n     output+=\"  <div class='item-after smart-select-value'  data-i18n='register.Marital'>register.Marital</div>\";\n     output+=\"     </div>\";\n     output+=\"   </div>\";\n   output+=\" </a>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n output+=\"</div>\";\n output+=\"<div class='global_error col-90 input-clear-button'></div>\";\n\n output+= \"<div class='item-input-wrap col-100'>\";\n    output+=\" <input type='button' name='submit'  data-i18n='[value]register.Next'  class='col-90 btn-submit' onclick='getNextSlide()'>\";  //2018_10_14 add col-90\n output+=\"</div>\";\n//  output+=\"</form>\";\nreturn output;\n}\nfunction getNextSlide(){\n  mySwiper.slideNext();\n}\nfunction drawPasswordForm(){\n  var output='';\n  //  output+=\"<form method='post' class='ajax-submit col-90 auto-view row ' id='forget_form '>\";\n  output+= \"<div class='item-input-wrap row col-100 register_form_Password_parent'>\";\n    output+= \"<input type='password' name='Password' data-type='Password' id='register_form_Password'  data-i18n='[placeholder]register.Password'  class='input_text  col-90'>\";\n    output+=\"<span class='col-90 input-clear-button'></span>\";\n  output+=\"</div>\";\n  output+= \"<div class='item-input-wrap row col-100 register_form_ConfirmPassword_parent'>\";\n    output+= \"<input type='password' name='ConfirmPassword'  data-type='ConfirmPassword' mainType='register_form_Password'  id='register_form_ConfirmPassword' data-i18n='[placeholder]register.PasswordConfirm'  class='input_text  col-90'>\";\n   output+=\"<span class='col-90 input-clear-button'></span>\";\n  output+=\"</div>\";\n\n  output+= \"<div class='item-input-wrap row col-100'>\";\n     output+=\" <input type='button' name='submit' data-i18n='[value]register.Next'  class='btn-submit col-90' onclick='getNextSlide()'>\";\n  output+=\"</div>\";\n  //  output+=\"</form>\";\n  return output;\n}\nfunction drawAgrement(){\n  var output='';\n  output+=\"<h2 class='col-90  text-center title_center top_reg m_auto'  data-i18n='register.Term'   >register.Term</h2>\";\n  output+=\"<div class='col-90 agree'>\"+AppMainData.TermAndConditions+\"</div>\";\n  output+= \"<div class='item-input-wrap col-100 mt-3'>\";\n     output+=\" <input type='submit' name='submit' data-i18n='[value]register.Agree'  class='btn-submit col-90' >\";//2018_10_14 add col-90\n  output+=\"</div>\";\n  return output;\n}\n//drawRegister\nfunction drawRegister(){\n  var output=\"\";\n  output+=\"<div class=' register_page bg_fixed '  style='background-image:url(images/regisrer.jpg)'>\";\n    output+=\"<div class='navbar navbar_content'></div>\";\n    output+=\"<form method='post' class='ajax-submit col-90 auto-view row ' id='register_form'>\";\n\n  output+='  <div class = \"swiper-container regisrer-slider \">';\n  output+='    <div class = \"swiper-wrapper\">';\n\n      output+=\"   <div class='swiper-slide'> \";\n\n        output+=\"   <div class='row'> \";\n           output+=\"   <div class='row first_item registerScreen'> \";\n                output+=\"<h2 class='col-100  text-center title_center top_reg m_auto'  data-i18n='register.reg' >register.reg</h2>\";\n\n            output+=drawRegisterForm();\n\n         output+=\" </div>\";\n        output+=\" </div>\";\n\n      output+=\" </div>\";\n\n    output+=\"    <div class='swiper-slide' >\";\n\n      output+=\"   <div class='first_item row password_screen'> \";//--new 2018_10_14 addClass password_screen-//\n         output+=\"<h2 class='col-100  text-center title_center top_reg m_auto'   data-i18n='register.reg'>register.reg</h2>\";\n         output+=drawPasswordForm();\n      output+=\" </div>\";\n\n    output+=\"</div>\";\n\n    output+=\"    <div class='swiper-slide '  >\";\n     output+=\"   <div class='row first_item'> \";\n\n      output+=drawAgrement();\n    output+=\" </div>\";\n\n    output+=\" </div>\";\n\n\n\n  output+='</div>';\n\n  output+='</div>';\n  output+='  <div class = \"swiper-pagination pos\"></div>';\n  output+=\"</form>\";\n  output+=\"</div>\";\n  $$(mainView.activePage.container).find('.register').html(output);\n}\n\n//visitor  Register\nfunction checkUser(){\n  setTimeout(function(){\n    var userData = window.localStorage.getItem(\"UserData\");\n  //  console.log('ssss',userData);\n    if(userData){\n      userData=JSON.parse(userData);\n    //   if(userData.ProfileImage){\n    // //    console.log('userDatassss');\n    //     myApp.mainView.allowPageChange = true;\n    //\n    //     mainView.router.loadPage('templates/show_profile.html');\n    //   }else{\n    // //    console.log('userDatasssssqqqss');\n    //     myApp.mainView.allowPageChange = true;\n    //     mainView.router.loadPage('templates/profile.html');\n    //   }\n      mainView.router.loadPage('templates/slider.html');\n    }\n\n  },0)\n}\nmyApp.onPageBeforeAnimation('register',function(e){\n  console.log(window.localStorage.getItem(\"userData\"));\n\n  checkUser();\n  drawRegister();\n\n});\nvar mySwiper;\nmyApp.onPageAfterAnimation('register',function(e){\n\n   myCalendar = myApp.calendar({\n      input: '#register_form_BirthDate',\n  });\n   mySwiper = new Swiper('.regisrer-slider', {\n    pagination:'.swiper-pagination',\n  });\n  requires=['FirstName','LastName','Email','Phone','CityId','ResidencyId','Password','ConfirmPassword'];\n  formId='register_form';\n  var urlReq=baseUrlMain+'ManageCustomer/CreateCustomer'\n  listnerRegisterFormAction(urlReq);\n\n});\n//verification code\nmyApp.onPageAfterAnimation('verification',function(e){\n  requires=['number_1','number_2','number_3','number_4','mobile'];\n  formId='verif_form';\n  var urlReq=baseUrlMain+'ManageAccount/Verification'\n  listnerverificationFormAction(urlReq);\n});\nmyApp.onPageBeforeAnimation('verification',function(e){\n  var btn='Change password Now';\n  if(mainView.activePage.query.q==1){\n    mobileUser=user.mobile;\n    btn='Submit';\n  }\n  var output=\"\";\n  output+=\"<div class='row'>\";\n  output+=\"<div class='col-100 verification_title'>\";\n    output+=\"<h1  data-i18n='Verification.Title'>Verification.Title</h1>\";\n  output+=\"</div>\";\n  output+=\"<div class='col-100 verification_content'>\";\n    output+=\"<div  data-i18n='Verification.Msg'>Verification.Msg</div>\";\n    output+=\"<div  data-i18n='Verification.MsgData'>Verification.MsgData</div>\";\n  output+=\"</div>\";\n  output+=\"<div class='col-100 verification_content'>\";\n    output+=\"<div data-i18n='Verification.viaSms'>Verification.viaSms </div>\";\n  output+=\"</div>\";\n  output+=\"<form method='post' class='ajax-submit col-90 auto-view row' id='verif_form'>\";\n  output+=\"<div class='col-100 verification_content verif_form_mobile_parent'>\";\n  output+= \"<input type='number' name='mobile' id='verif_form_mobile' value='\"+mobileUser+\"' class='input_text  col-80 disable'  >\";\n  output+=\"<span class='input-clear-button'></span>\";\n  output+=\"</div>\";\n  if(mainView.activePage.query.q==1){\n\n    output+=\"<div class='col-100 verification_content click_here' onClick='activeInput()'>\";\n    output+=\"<div>To change number <span class='red_clr' data-i18n='Verification.click'>Verification.click</span></div>\";\n    output+=\"</div>\";\n  }\n  output+=\"<div class='col-100 verification_content enter_code'>\";\n    output+=\"<a onclick='activeInput()' ' data-i18n='Verification.code'>Verification.code</a>\";\n  output+=\"</div>\";\n output+= \"<div class='item-input-wrap col-100 verif_form_number_parent row'>\";\n output+= \"<input type='number' name='number_1' id='verif_form_number_1' placeholder=''   class='input_text col-25 verif_form_number'>\";\n output+= \"<input type='number' name='number_2' id='verif_form_number_2' placeholder=''   class='input_text col-25 verif_form_number '>\";\n   output+= \"<input type='number' name='number_3' id='verif_form_number_3' placeholder=''   class='input_text col-25 verif_form_number'>\";\n   output+= \"<input type='number' name='number_4' id='verif_form_number_4' placeholder=''   class='input_text  col-25 verif_form_number'>\";\n   output+=\"<span class='input-clear-button'></span>\";\n output+=\"</div>\";\n output+=\" <input type='submit' name='submit' value='\"+btn+\"' class='btn-submit'>\";\n  output+=\"</form>\";\n  output+=\"<div class='col-100 verification_content resend'>\";\n    output+=\"<div onClick='resendCode()' data-i18n='Verification.resend'>Verification.resend</div><span class='resendcodeUser preloader preloader-yellow hidden'></span><span class='resendcodeUserMsg '></span>\";\n  output+=\"</div>\";\n  output+=\"</div>\";\n  $$(mainView.activePage.container).find('#verification').html(output);\n\n\n  $('.verif_form_number_parent input').on('input', function(ev) {\n      var $this = $(this);\n      var value = $this.val();\n      if (value && value.length >= 1) {\n        $this.val(value.substr(0, 1));\n      }\n    });\n\n\n\n    $(\".verif_form_number_parent input\").keyup(function () {\n       console.log('111');\n      if (this.value.length >= 1) {\n             console.log('222');\n\n        $(this).next('input').focus();\n      }\n  });\n\n\n});\nfunction HideToolbar(){\n // $$('.toolbar.toolbar-bottom-md').attr('style','display:none');\n $$('.toolbar.toolbar-bottom-md').addClass('hidethetoolbar');\n}\nfunction toolbar(){\n   $$('.toolbar.toolbar-bottom-md').removeClass('hidethetoolbar');\n\n  //$$('.toolbar.toolbar-bottom-md').removeAttr('style');\n  var output=\"\";\n  output+='    <div class=\"toolbar-inner\">';\n  if(mainView.activePage.name==='offers'){\n    output+='<a class=\"link\" href=\"templates/offers.html\"><img src=\"images/offer_active.png\" /></a>';\n  }else {\n    output+='    <a class=\"link\" href=\"templates/offers.html\"><img src=\"images/offer.png\" /></a>';\n    // output+='<a class=\"link\" href=\"templates/notifications.html\"><img src=\"images/notification_icon.png\" /></a>';\n  }\n\n  if(mainView.activePage.name==='branches'){\n    output+='    <a class=\"link\" href=\"templates/branches.html\"><img src=\"images/my_location_icon_active.png\" /></a>';\n  }else {\n    output+='    <a class=\"link\" href=\"templates/branches.html\"><img src=\"images/my_location_icon.png\" /></a>';\n  }\n  if(mainView.activePage.name==='redeem_landing'){\n    output+='<a class=\"link\" href=\"templates/redeem_landing.html\"><img src=\"images/group_active.png\" /></a>';\n  }else {\n    output+='<a class=\"link\" href=\"templates/redeem_landing.html\"><img src=\"images/group.png\" /></a>';\n    // output+='<a class=\"link\" href=\"templates/notifications.html\"><img src=\"images/notification_icon.png\" /></a>';\n  }\n  if(mainView.activePage.name==='notifications'){\n    output+='<a class=\"link\" href=\"templates/notifications.html\"><img src=\"images/notification_icon_active.png\" /></a>';\n  }else {\n    output+='<a class=\"link\" href=\"templates/notifications.html\"><img src=\"images/notification_icon.png\" /></a>';\n  }\n  if(mainView.activePage.name==='show_profile'){\n    output+='<a class=\"link\" href=\"templates/show_profile.html\"><img src=\"images/my_profile_icon_active.png\" /></a>';\n  }else {\n    output+='<a class=\"link\" href=\"templates/show_profile.html\"><img src=\"images/my_profile_icon.png\" /></a>';\n  }\n  output+='  </div>';\n  $$('.toolbar').html(output);\n}\nfunction activeInput(){\n  $$('#verif_form_mobile').removeClass('disable');\n}\nmyApp.onPageAfterAnimation('show_profile',function(e){\n\n});\nmyApp.onPageBeforeAnimation('show_profile',function(e){\n  var userData = window.localStorage.getItem(\"UserData\");\n   userData=JSON.parse(userData);\n  var output=\"\";\n  drawPointsPopup();\n  //platinum or silver or blue to user_profile\n  userData.type=userData.type.toLowerCase();\n\n  output+=\"<div class='row \"+userData.type+\" user_profile'>\";\n\n    output+=\"<div class='text-center top_side row col-100'>\";\n      output+=\"<div class='col-100'>\";\n        output+=\"<h3 class='name'>\"+userData.FirstName+\" \"+userData.LastName+\"</h3>\";\n        output+=\"<div class='status' data-i18n='show_profile.Active'>show_profile.Active</div>\";\n        output+=\"<div>\";\n         if(userData.ProfileImage){\n           output+=\"<div class='user_profile_img'><img src='\"+userData.ProfileImage+\"' /></div>\";\n         }else{\n           output+=\"<div class='user_profile_img'><img src='images/avatar.png' /></div>\";\n         }\n        output+=\"</div>\";\n       output+=\"</div>\";\n\n      output+=\"<div class='col-90 row auto-view '>\";\n        output+=\"<div class='row col-100 text-center rev_pos'>\";\n            output+=\"<div class='col-100  small text-center gray_clr' data-i18n='show_profile.available'>show_profile.available</div>\";\n            output+=\"<h2 class='col-100  user_points'>\"+userData.walts+\" <span data-i18n='transactions.Watts'>transactions.Watts<span></h2>\";\n            output+=\"<a href='#' class='info_icon open_timline open-popup' data-popup='.popup-points'><img src='images/info_icon.png' /></a>\";\n\n        output+=\"</div>\";\n\n      output+=\"</div>\";\n    output+=\"</div>\";\n\n    output+=\"<div class='col-90 row auto-view '>\";\n      output+=\"<div class='row rev_pos col-100 '>\";\n      output+=\"<div class='expired col-100 row'>\";\n        output+=\"<div class=' small gray_clr'><span data-i18n='show_profile.Expire'>show_profile.Expire </span> 30 <span data-i18n='show_profile.days'>show_profile.days </span> </div>\";\n        output+=\"<div data-i18n='show_profile.Watts'>345 show_profile.Watts</div>\";\n       output+=\"<div data-i18n='show_profile.Expires'>show_profile.Expires 23/7/2018</div>\";\n      output+=\"</div>\";\n      output+=\"<a class='share_ico' onclick='window.plugins.socialsharing.share(\\'Message only\\', null, null, null)'><img src='images/share.png' /></a>\";\n      output+=\"</div>\";\n    output+=\"</div>\";\n    output+=\"<div class='col-100 row'><a class='profile_btn'  href='templates/redeem_landing.html' role='button' data-i18n='show_profile.Coupons' >show_profile.Coupons</a> </div>\";\n    output+=\"<div class='col-100 row'><a  class='profile_btn' href='templates/transactions.html' role='button' data-i18n='show_profile.Transactions' >show_profile.Transactions</a></div>\";\n\n  output+=\"</div>\";\n$$(mainView.activePage.container).find('.show_profile').html(output);\ndrawCartPopup();\n});\nfunction drawCartPopup(){\n  var userData = window.localStorage.getItem(\"UserData\");\n   userData=JSON.parse(userData);\n\n  var output=\"\";\n\n  output+='<div class=\"content-block\">';\n  output+='  <p><a href=\"#\" class=\"close-popup\"><img src=\"images/back_up.png\" /></a></p>';\n\n      output+='<div class=\"max_wdth\">';\n      output+='<h3 data-i18n=\"cart.Discover\" >cart.Discover</h3>';\n      userData.cart=userData.cart.toLowerCase();\n      output+='<div class=\"card_img\" style=\"background-image:url(images/'+userData.cart+'_card.png)\">';\n      output+='<img class=\"img-fluid\" src=\"images/almanara_logo_details.png\" />';\n\n        output+='<div class=\"row card_details\">';\n          output+='<div class=\"text-left col-40\">'+userData.cart+'</div>';\n          output+='<div class=\"text-right col-60\">';\n             output+='<h1 class=\"walts\">'+userData.walts+'</h1>';\n             output+='<div class=\"s_small\" data-i18n=\"cart.available\">cart.available</div>';\n           output+='</div>';\n        output+='</div>';\n\n        output+='<h1 class=\"text-left username my-0\">'+userData.FirstName+\" \"+userData.LastName+'</h1>';\n      output+='</div>';\n      output+='</div>';\n\n     output+='<div class=\"barcode_bg\">';\n      output+='<div class=\"max_wdth\">';\n           output+='<img class=\"img-fluid\" src=\"images/test/barcode.png\" />';\n      output+='</div>';\n     output+='</div>';\n\n  output+='</div>';\n\n  $$('.popup-cart').html(output);\n}\nfunction drawPointsPopup(){\n  var output=\"\";\n  output+='<div class=\"content-block\">';\n  output+='  <p><a href=\"#\" class=\"close-popup\"><img src=\"images/back_up.png\" /></a></p>';\n  output+=drawPoints();\n  output+='</div>';\n\n  $$('.popup-points').html(output);\n}\nfunction changePage(){\n\n\n}\nfunction changeSelect(){\n  $$('.products_filter').on('change', function(e){\n    var item=$$(this).val();\n    if(item=='Offers'){\n      mainView.router.loadPage('templates/offers.html');\n\n    }else if(item=='Products'){\n      mainView.router.loadPage('templates/products.html');\n    }\n    //console.log(\"Selected city : \" + item);\n  });\n\n}\nmyApp.onPageAfterAnimation('offers',function(e){\n  changeSelect();\n  offerListnerPagination();\n});\nfunction offerListnerPagination(){\n\n  // Last loaded index\n  lastIndex = $$(mainView.activePage.container).find('.offers .offer_item').length;\n  // Attach 'infinite' event handler\n  $$('.infinite-scroll').on('infinite', function () {\n    // Exit, if loading in progress\n    if (loading) return;\n    // Set loading flag\n    loading = true;\n    // Emulate 1s loading\n    setTimeout(function () {\n      // Reset loading flag\n      loading = false;\n      if (lastIndex >= maxItems) {\n        // Nothing more to load, detach infinite scroll events to prevent unnecessary loadings\n        myApp.detachInfiniteScroll($$('.infinite-scroll'));\n        // Remove preloader\n        $$('.infinite-scroll-preloader').remove();\n        return;\n      }\n      appendToOfferData();\n    }, 1000);\n  });\n}\nfunction productsListnerPagination(){\n\n  // Last loaded index\n  lastIndexProduct = $$(mainView.activePage.container).find('.products .product_item').length;\n  // Attach 'infinite' event handler\n  $$('.infinite-scroll').on('infinite', function () {\n    // Exit, if loading in progress\n    if (loadingProduct) return;\n    // Set loading flag\n    loadingProduct = true;\n    // Emulate 1s loading\n    setTimeout(function () {\n      // Reset loading flag\n      loadingProduct = false;\n      if (lastIndexProduct >= maxItemsProduct) {\n        // Nothing more to load, detach infinite scroll events to prevent unnecessary loadings\n        myApp.detachInfiniteScroll($$('.infinite-scroll'));\n        // Remove preloader\n        $$('.infinite-scroll-preloader').remove();\n        return;\n      }\n      appendToProductData();\n    }, 1000);\n  });\n}\nfunction appendToOfferData(){\n  // Generate new items HTML\n  requestOfferData(drawOfferAppend);\n\n}\nfunction appendToProductData(){\n  // Generate new items HTML\n  requestProductData(drawProductAppend);\n\n}\nfunction drawOfferAppend(data){\n  var output = '';\n  output+=drawItemsOffers(data.offers);\n  // Append new items\n  $$(mainView.activePage.container).find('.offers').append(output);\n\n  // Update last loaded index\n  lastIndex = $$(mainView.activePage.container).find('.offers .offer_item').length;\n}\nfunction drawProductAppend(data){\n  var output = '';\n  output+=drawItemsProducts(data.products);\n  // Append new items\n  $$(mainView.activePage.container).find('.products').append(output);\n\n  // Update last loaded index\n  lastIndexProduct = $$(mainView.activePage.container).find('.products .product_item').length;\n\n}\nvar offers=[];\nvar products=[];\nmyApp.onPageBeforeAnimation('offers',function(e){\n/*  if(offers.length>0){\n    drawOfferPage(offers);\n  }else{\n  }*/\n  offer_page=0;\n  requestOfferData(drawOfferPage);\n});\nfunction requestOfferData(callback){\n  //showLoader();\n\n  offer_page++;\n  var language=currentLang.Id;\n  var perPage=10;\n  var url=baseUrlMain+'ManageGeneralData/GetAllOffers?PageIndex='+offer_page+'&LanguageId='+language+'&PageSize='+perPage;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //data = JSON.parse(data);\n  //    maxItems=data.Data.length;\n      maxItems=data.MaxJsonLength;\n      if(data.Data){\n        if(offer_page==1){\n          offers=data.Data.offers;\n        }else{\n          if(data.Data.offers.length>0){\n            offers.push(data.Data.offers);\n          }\n        }\n      //  hideLoader();\n        if(callback){\n          callback(data.Data);\n        }\n      }\n    }\n  });\n}\nfunction requestProductData(callback){\n  //showLoader();\n  product_page++;\n  var language=currentLang.Id;\n  var perPage=10;\n  var url=baseUrlMain+'ManageGeneralData/GetAllProduct?PageIndex='+product_page+'&LanguageId='+language+'&PageSize='+perPage;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n    //  console.log(data);\n    //  data = JSON.parse(data);\n    //    maxItems=data.Data.length;\n      maxItemsProduct=data.Data.length;\n    //  maxItemsProduct=data.Data.length;\n      if(data.Data){\n        if(product_page==1){\n          products=data.Data.products;\n        }else{\n          if(data.Data.products.length>0){\n            products.push(data.Data.products);\n          }\n        }\n\n      //  hideLoader();\n        if(callback){\n          callback(data.Data);\n        }\n      }\n    }\n  });\n}\nfunction drawOfferPage(data){\n  var output=\"\";\n  output+=\"<div class='row'>\";\n\n      output+=\"<div class='row col-100  available_on auto '>\";\n          output+=\"<div class='col-65'>\";\n            output+=\"<div  ><span data-i18n='offers.Available'> offers.Available  </span>( \"+data.avalibleInBranch+\" )</div>\";\n          output+=\"</div>\";\n          output+=\"<div class='col-35 text-right'>\";\n            output+=\"<a class='show_map' href='templates/branches.html' ><img src='images/pin.png'/><span data-i18n='offers.map'> offers.map</span></a>\";\n          output+=\"</div>\";\n        output+=\"</div>\";\n         if(data.length>0){\n           output+=drawItemsOffers(data.offers);\n         }else{\n           output+=\"<span data-i18n='offers.Exists'>offers.Exists</span>\";\n         }\n    output+=\"</div>\";\n\n   $$(mainView.activePage.container).find('.offers').html(output);\n   displayLanguage();\n\n}\nfunction drawProductPage(data){\n  //data.avalibleInBranch=100;\n  var output=\"\";\n  output+=\"<div class='row'>\";\n    output+=\"<div class='col-100 text-center cat_img'>\";\n        output+=\"<img  class='img-fluid' src='images/panasonic.png' />\";\n      output+=\"</div>\";\n\n        output+=\"<div class='row col-100  available_on auto'>\";\n          output+=\"<div class='col-65'>\";\n          output+=\"<div ><span  data-i18n='products.Available'>products.Available </span>( \"+data.avalibleInBranch+\" )</div>\";\n          output+=\"</div>\";\n          output+=\"<div class='col-35 text-right'>\";\n            output+=\"<a class='show_map' href='templates/branches.html' ><img src='images/pin.png'/> <span data-i18n='products.Map'> products.Map </span></a>\";\n          output+=\"</div>\";\n        output+=\"</div>\";\n\n\n    output+=\"</div>\";\n      output+=drawItemsProducts(data.products);\n\n     $$(mainView.activePage.container).find('.products').html(output);\n     displayLanguage();\n\n}\nmyApp.onPageBeforeAnimation('products',function(e){\n  //drawNavbarMenuOfferPage('Products Panasonic','gray');\n/*  if(products.length>0){\n    drawProductPage(products);\n  }else{\n  }*/\n  product_page=0;\n  requestProductData(drawProductPage);\n\n\n});\nmyApp.onPageAfterAnimation('products',function(e){\n  changeSelect();\n  productsListnerPagination();\n});\nmyApp.onPageBeforeAnimation('transactions',function(e){\n // drawNavbarMenuBackPage('Transactions');\n  drawPointsPopup();\n\n  var output=\"\";\n  output+=\"<div class='row'>\";\n    output+=\"<div class='fixed_bar red_bar col-100 row '>\";\n\n      output+=\"<div class='col-70 '>\";\n          output+=\"You have <span class='totalWalt'></span><span  data-i18n='transactions.Watts'>transactions.Watts</span> \";\n        output+=\"</div>\";\n\n      output+=\"<div class='col-30'>\";\n\n      output+=\"<p class='my-0 text-right'><a href='#' data-popup='.popup-points' class='open_timline open-popup'><i class='fa fa-calendar' aria-hidden='true'></i></a></p>\";\n  //     output+=\"<a href='#'data-popup='.popup' class='open-popup'><i class='fa fa-calendar' aria-hidden='true'></i></a>\";\n        output+=\"</div>\";\n     output+=\"</div>\";\n\n    output+=\"<div class='col-100 transactionsList'>\";\n        output+=\"<div class='preloader preloader-yellow'></div>\";\n      output+=\"</div>\";\n\n    output+=\"</div>\";\n\n   $$(mainView.activePage.container).find('.transactions').html(output);\n   getTransactionDataUser(drawItemsTransactions);\n\n});\nfunction getTransactionDataUser(callback){\n  var userData = window.localStorage.getItem(\"UserData\",userData);\n  userData=JSON.parse(userData);\n  var url=baseUrlMain+'ManageGeneralData/GetAllCustomerTransactions?CustomerId='+userData.Id+'&LanguageId='+currentLang.Id+'&&PageIndex=1&PageSize=0';\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n    //  console.log(data);\n      //data = JSON.parse(data);\n      if(data.Data){\n        if(callback){\n          callback(data.Data);\n        }\n       }\n    }\n  });\n}\nmyApp.onPageBeforeAnimation('points',function(e){\n  var output=\"\";\n\n      output+='<a href=\"#\"><img src=\"images/back_up.png\" /></a>';\n       output+=drawPoints();\n   $$(mainView.activePage.container).find('.points').html(output);\n});\nfunction drawPoints(){\n  var output=\"\";\n\n  //expired\n  //expire_second\n  //expire_first\n  var userData = window.localStorage.getItem(\"UserData\");\n   userData=JSON.parse(userData);\n\n\n        output+='<div class=\"timeline\">';\n          output+='<div class=\"timeline-item all_points\">';\n        //  output+='  <div class=\"timeline-item-date\">21 <small>DEC</small></div>';\n            output+='  <div class=\"timeline-item-divider\"></div>';\n            output+='    <div class=\"timeline-item-content\">';\n            output+='      <div class=\"timeline-item-time\" data-i18n=\"points.available\">points.available</div>';\n            output+='      <div class=\"timeline-item-title\">'+userData.walts+'</div>';\n            output+='    </div>';\n          output+='</div>';\n         for(var i=0;i<userData.points.length;i++){\n          //expired or  expire_second or  expire_first  to timeline-item\n          var d = new Date(userData.points[i].date);\n           var date = d.getDate()+'/'+d.getMonth()+'/'+d.getFullYear();\n           userData.points[i].status.replace(/[\"']/g, \"\");\n\n           output+='  <div class=\"timeline-item '+userData.points[i].status.replace(/[\"']/g, \"\")+'\">';\n           //  output+='    <div class=\"timeline-item-date\">22 <small>DEC</small></div>';\n           output+='    <div class=\"timeline-item-divider\"></div>';\n           output+='    <div class=\"timeline-item-content\">';\n           output+='      <div class=\"timeline-item-time\">Expire '+date+'</div>';\n           output+='      <div class=\"timeline-item-title\">'+userData.points[i].walts+'</div>';\n           output+='    </div>';\n           output+='  </div>';\n\n         }\n\n\n       output+='</div>';\n       return output;\n}\n/*function getProductDetails(callback){\n  var url=baseUrl+'product.php?id=1&language=en';\n  $.ajax({\n    url: url,\n  //  data: data,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      data = JSON.parse(data);\n      if(data.status==200){\n        hideLoader();\n        if(callback){\n          callback(data.data);\n        }\n      }\n    }\n  });\n\n}*/\n\n\nfunction calcTime(){\n  var id= mainView.activePage.query.query;\n  var branch=BranchesObj[id];\n  var option = {\n    enableHighAccuracy: true // use GPS as much as possible\n  };\n  plugin.google.maps.LocationService.getMyLocation(option, function(location) {\n    my_location=location;\n  //  console.log('my_location',my_location.time);\n\n    var request = {\n      origin: {\n        lat: my_location.latLng.lat,\n        lng: my_location.latLng.lng\n      },\n      destination: {\n        lat: parseFloat(branch.Latitude),\n        lng: parseFloat(branch.Longitude)\n      },\n      travelMode: google.maps.TravelMode.DRIVING\n      //  travelMode: google.maps.TravelMode.WALKING\n    };\n    time_distance=convertMS(my_location.time); // \"4:59\"\n     var time='';\n     if(time_distance.day!='0'){\n       time+='<span data-i18n=\"show_profile.days\"> show_profile.days:</span> '+time_distance.day;\n     }\n     if(time_distance.hour!='0'){\n       time+='<span data-i18n=\"branch.hour\"> branch.hour:</span> '+time_distance.hour;\n     }\n     if(time_distance.minute!='0'){\n       time+='<span data-i18n=\"branch.min\"> branch.min:</span> '+time_distance.minute;\n     }\n     if(time_distance.seconds!='0'){\n       time+='<span data-i18n=\"branch.seconds\"> branch.seconds:</span> '+time_distance.seconds;\n     }\n    $$('.nearby').html(time);\n    displayLanguage();\n  //  console.log('my_location',time_distance);\n  });\n\n}\n\n\nmyApp.onPageBeforeAnimation('branch_details',function(e){\n   drawBranch();\n    requestLocationAccuracy(calcTime);\n  //drawBranch();\n});\nfunction drawBranch(){\n  var id= mainView.activePage.query.query;\n  var branch=BranchesObj[id];\n  var output=\"\";\n\n  output+=\"<div class='row  details_wrapp rev_pos'>\";\n\n         output+=\"<div class='col-100 branch_img text-center auto-view'>\";\n           output+=\"<img  class='img-fluid ' src='\"+branch.Image+\"' />\";\n         output+=\"</div>\"\n         output+=\"<div class='col-90 auto-view'>\";\n            output+=\"<h1 class='col-100 my-0'>\"+branch.Name+\" </h1>\";\n            output+=branch.Description;\n             output+=\"<div class='contact_branch'>\"\n               output+=\"<h4 class='col-100 row my-0 '  data-i18n='branch.Contact'>branch.Contact</h4>\";\n\n               output+=\"<div class='col-100 row'><a href='tel:\"+branch.Phone+\"'>\"+branch.Phone+\" </a></div>\";\n             output+=\"</div>\"\n\n        output+=\"<h4 class='col-100 row my-0' ><span data-i18n='branch.Nearby'>branch.Nearby</span> <span class='nearby'></span> <span data-i18n='branch.min'>branch.min</span> </h4>\";\n        output+=\"<div class='col-100 row' >\"+branch.Address+\"</div>\";\n\n        output+=\"<div class='col-100 row auto-view' >\";\n         output+=\"<a class='btn-submit text_uppercase get_branch_dir' href='templates/branch_distance.html?query=\"+branch.Id+\"' data-i18n='branch.direction'>branch.direction</a>\";\n       output+=\"</div>\";\n\n      output+=\"</div>\";\n\n    output+=\"</div>\";\n\n   $$(mainView.activePage.container).find('.branch_details').html(output);\n   displayLanguage();\n\n}\nmyApp.onPageBeforeAnimation('branches',function(e){\n  //drawNavbarEmpty();\n  drawBranches();\n  $$(mainView.activePage.container).find('.error_data').html('');\n});\nmyApp.onPageBeforeAnimation('brnches_map',function(e){\n  branchesMap();\n});\nvar map;\nmyApp.onPageAfterAnimation('brnches_map',function(e){\n  var mapDiv = document.getElementById(\"map_canvas\");\n  var areaId=mainView.activePage.query.query;\n  var options = {\n    camera: {\n      target: {lng:  AreasObj[areaId].Longitude, lat: AreasObj[areaId].Latitude},\n      zoom: 8\n    }\n  };\n  map = plugin.google.maps.Map.getMap(mapDiv,options);\n   // The MAP_READY event notifies the native map view is fully ready to use.\n   map.on(plugin.google.maps.event.MAP_READY, onMapInit);\n   listnerMap();\n  });\n  myApp.onPageBeforeAnimation('branch_distance',function(e){\n    //requestLocationAccuracy();\n    brancheDistanceMap();\n    requestLocationAccuracy(show_distance);\n  });\nvar map;\nvar map_distance;\nvar my_location;\nfunction show_distance(){\n\n    var option = {\n      enableHighAccuracy: true // use GPS as much as possible\n    };\n  /*  cordova.plugins.locationAccuracy.canRequest(function(canRequest){\n        if(canRequest){\n            cordova.plugins.locationAccuracy.request(function(){\n                console.log(\"Successfully made request to invoke native Location Services dialog\");\n            }, function(){\n              //  myApp.alert('Please Enable GPS');\n                console.error(\"Failed to invoke native Location Services dialog\");\n            });\n        }else{\n            // request location permission and try again\n        }\n    });\n  */\n  var id= mainView.activePage.query.query;\n  var branch=BranchesObj[id];\n  //console.log(branch,'branch');\n  //console.log(BranchesObj,'BranchesObj');\n    plugin.google.maps.LocationService.getMyLocation(option, function(location) {\n     my_location=location;\n      // Create a map with the device location\n      var mapDiv = document.getElementById('map_branch');\n      //map_distance.setMyLocationEnabled(true);\n\n  /*    var HND_AIR_PORT = {lat: my_location.latLng.lat, lng:  my_location.latLng.lng};\n      var SFO_AIR_PORT = {lat: 30.09098369999999, lng: 31.32270900000003};\n  */\n  /*var HND_AIR_PORT = {lat: 37.736033, lng:  -122.406750};\n  var SFO_AIR_PORT = {lat: 37.787060, lng: -122.389584};\n  */\n    var HND_AIR_PORT = {lat: my_location.latLng.lat, lng:  my_location.latLng.lng};\n    var SFO_AIR_PORT = {lat:parseFloat(branch.Latitude), lng: parseFloat(branch.Longitude)};\n      var AIR_PORTS = [\n        HND_AIR_PORT,\n        SFO_AIR_PORT\n      ];\n\n       map_distance = plugin.google.maps.Map.getMap(mapDiv, {\n        'camera': {\n          target: AIR_PORTS,\n          zoom: 16\n        }\n      });\n      map_distance.setMyLocationEnabled(true);\n      //  map_distance.on(plugin.google.maps.event.MAP_READY, onMapInitBranch);\n\n      map_distance.addEventListener(plugin.google.maps.event.MAP_READY,onMapInitBranch);\n    });\n\n  /*\n\n    var mapDiv = document.getElementById(\"map_branch\");\n    var options = {\n      camera: {\n        target: {lng: -122.1180187, lat: 37.3960513},\n        zoom: 19\n      }\n    };*/\n    //map_distance\n    /*var HND_AIR_PORT = {lat: 35.548852, lng: 139.784086};\n    var SFO_AIR_PORT = {lat: 37.615223, lng: -122.389979};\n    var AIR_PORTS = [\n      HND_AIR_PORT,\n      SFO_Ae.maps.Map.getMap(mapDiv,{\n    camera: {\n      target: AIR_PORTS\n    }\n    });*/\n    // The MAP_READY event notifies the native map view is fully ready to use.\n  //  map_distance.on(plugin.google.maps.event.MAP_READY, onMapInitBranch);\n}\nmyApp.onPageAfterAnimation('branch_distance',function(e){\n\n  listnerMap();\n});\nfunction listnerMap(){\n  $$(\"#map_area\").on(\"blur\", function () {\n    map.setClickable(true);\n  }).on(\"click\", function () {\n    map.setClickable(false);\n  }).on(\"change\", function () {\n    event.stopPropagation();\n    event.preventDefault();\n    // searching\n  });\n  $$(\"#map_area\").on('change',function(){\n    var id =$(this).val();\n    var lat=AreasObj[id].Latitude;\n    var long=AreasObj[id].Longitude;\n    map.animateCamera({\n      target: {lng: long, lat: lat},\n    });\n  /*  map.moveCamera({\n      target: {lng: -122.1180187, lat: 37.3960513},\n\n    });*/\n  });\n}\nfunction onMapInitBranch() {\n  $$('.page-on-left').addClass('hidden');\n  var width=$$('body').outerWidth();\n  var height=$$('body').outerHeight();\n  $$('#map_branch').attr('style','width:'+width+'px !important;height: '+height+'px !important');\n  var id= mainView.activePage.query.query;\n  var branch=BranchesObj[id];\n\n  // Add a polyline\n  //map_distance\n/*  var HND_AIR_PORT = {lat: 37.736033, lng:  -122.406750};\n  var SFO_AIR_PORT = {lat: 37.787060, lng: -122.389584};\n*/var HND_AIR_PORT = {lat: my_location.latLng.lat, lng:  my_location.latLng.lng};\nvar SFO_AIR_PORT = {lat:parseFloat(branch.Latitude), lng: parseFloat(branch.Longitude)};\n  var AIR_PORTS = [\n    HND_AIR_PORT,\n    SFO_AIR_PORT\n  ];\n  var request = {\n                  origin: {\n                      lat: my_location.latLng.lat,\n                      lng: my_location.latLng.lng\n                  },\n                  destination: {\n                      lat: parseFloat(branch.Latitude),\n                      lng: parseFloat(branch.Longitude)\n                  },\n                  travelMode: google.maps.TravelMode.DRIVING\n              };\n  var route=[];\n  new google.maps.DirectionsService().route(request, function(response, status)\n  {\n      if (status == google.maps.DirectionsStatus.OK)\n      {\n          //var route = new google.maps.DirectionsRenderer({suppressMarkers: true});\n        //  route.setMap(map);\n        //  route.setDirections(response);\n    //    console.log(response.routes);\n          var gRoute = response.routes[0]['overview_path'];\n          for (var s = 0; s < gRoute.length; s++) {\n            route.push(new plugin.google.maps.LatLng(gRoute[s].lat(), gRoute[s].lng()));\n          }\n\n            map_distance.addPolyline({\n              points: route,\n              'color' : 'red',\n              'width': 5,\n            });\n      }\n\n      map_distance.addMarker({\n        'position': HND_AIR_PORT,\n        icon:'images/pin.png',\n      });\n      map_distance.addMarker({\n        'position': SFO_AIR_PORT,\n        icon:branch.Icon,\n      });\n  });\n\n  //console.log(route);\n\n\n}\n/*map.moveCamera({\n  target: bounds\n});*/\n\nfunction onMapInit(map) {\n  $$('.page-on-left').addClass('hidden');\n  var width=$$('body').outerWidth();\n  var height=$$('body').outerHeight();\n  $$('#map_canvas').attr('style','width:'+width+'px !important;height: '+height+'px !important');\n  var data=[];\n  for(var i=0;i<Branches.length;i++){\n    var obj={\n      position: {lng: Branches[i].Longitude, lat:  Branches[i].Latitude},\n      title: Branches[i].Name,\n      icon: Branches[i].Icon,\n      id: Branches[i].Id\n    };\n    data.push(obj);\n  }\n  var bounds = [];\n  var markers = data.map(function(options) {\n    bounds.push(options.position);\n    map.addMarker(options,function(marker){\n      marker.set(\"data_id\", options.id);\n      marker.on(plugin.google.maps.event.MARKER_CLICK, function() {\n      //  console.log(this);\n        //console.log(this.get(\"data_id\"));\n        var id=this.get(\"data_id\");\n        drawBranchData(id);\n      });\n    });\n\n  });\n  var areaId=mainView.activePage.query.query;\n\n  if(areaId){\n    var lat=AreasObj[areaId].Latitude;\n    var long=AreasObj[areaId].Longitude;\n    map.animateCamera({\n      target: {lng: long, lat: lat},\n\n    });\n\n  }\n\n}\nvar time_distance;\n\nfunction drawBranchData(id){\n//  console.log('id',id);\n  //console.log('id',BranchesObj);\n  //console.log('id',BranchesObj[id]);\n  var branch=BranchesObj[id];\n  var option = {\n    enableHighAccuracy: true // use GPS as much as possible\n  };\n  plugin.google.maps.LocationService.getMyLocation(option, function(location) {\n    my_location=location;\n  //  console.log('my_location',my_location.time);\n\n    var request = {\n      origin: {\n        lat: my_location.latLng.lat,\n        lng: my_location.latLng.lng\n      },\n      destination: {\n        lat: parseFloat(branch.Latitude),\n        lng: parseFloat(branch.Longitude)\n      },\n      travelMode: google.maps.TravelMode.DRIVING\n    //  travelMode: google.maps.TravelMode.WALKING\n    };\n//    time_distance=convertMS(my_location.time); // \"4:59\"\n\n    time_distance=convertMS(my_location.time); // \"4:59\"\n     var time='';\n     if(time_distance.day!='0'){\n       time+='<span data-i18n=\"show_profile.days\"> show_profile.days:</span> '+time_distance.day;\n     }\n     if(time_distance.hour!='0'){\n       time+='<span data-i18n=\"branch.hour\"> branch.hour:</span> '+time_distance.hour;\n     }\n     if(time_distance.minute!='0'){\n       time+='<span data-i18n=\"branch.min\"> branch.min:</span> '+time_distance.minute;\n     }\n     if(time_distance.seconds!='0'){\n       time+='<span data-i18n=\"branch.seconds\"> branch.seconds:</span> '+time_distance.seconds;\n     }\n  //  $$('.nearby').html(time);\n\n    $$('.nearby').html(time);\n  //  console.log('my_location',time_distance);\n  });\n\n\n  var output=\"\";\n  output+=\"<div>\";\n        output+=\"<img src='\"+branch.Image+\"'/>\";\n       output+=\"<div class='col-100 text-center small nearby_map'><span data-i18n='branch.Nearby'>branch.Nearby</span> <span class='nearby'></span> <span data-i18n='branch.min'>branch.min</span> </div>\"\n      output+=\"<a  class='btn-submit text_uppercase get_branch_dir' href='templates/branch_details.html?query=\"+id+\"' data-i18n='branch.direction'> branch.direction </a>\";\n\n    output+=\"</div>\";\n  output+=\"</div>\";\n\n $$(mainView.activePage.container).find('.branch_data').html(output);\n\ndisplayLanguage();\n}\nfunction convertMS( milliseconds ) {\n    var day, hour, minute, seconds;\n    seconds = Math.floor(milliseconds / 1000);\n    minute = Math.floor(seconds / 60);\n    seconds = seconds % 60;\n    hour = Math.floor(minute / 60);\n    minute = minute % 60;\n    day = Math.floor(hour / 24);\n    hour = hour % 24;\n    return {\n        day: day,\n        hour: hour,\n        minute: minute,\n        seconds: seconds\n    };\n}\n\n\n/*map.moveCamera({\n  target: bounds\n});*/\n\nfunction brancheDistanceMap(){\n  var output='';\n  var branchId=mainView.activePage.query.query;\n  var area=AreasObj[BranchesObj[branchId].AreaId];\n  output+=\"<div class='row'>\";\n     output+=\"<div class='col-100 map_wrapper'>\";\n        output+=\"<div class='map_canvas' id='map_branch'></div>\";\n      output+='<div id=\"searchBox\">';\n               output+=\"<a href='#' class='item-link smart-select select-style' data-open-in='picker'  data-back-on-select='true'>\";\n               output+=\"   <select name='area' id='map_area'>\";\n               output+=\" <option value=''  data-i18n='profile.Select'>profile.Select </option>\";\n               var namearea='';\n\n               for(var i=0;i<Areas.length;i++){\n                 var selected='';\n                 if(Areas[i].Id==area.Id){\n                   selected='selected=\"selected\"';\n                   namearea=Areas[i].Name;\n                 }\n                 output+=\" <option value='\"+Areas[i].Id+\"' \"+selected+\"  >\"+Areas[i].Name+\"</option>\";\n               }\n               output+=\"   </select>\";\n               output+=\"   <div class='item-content'>\";\n               output+=\"     <div class='item-inner'>\";\n               output+=\"     <div class='item-after smart-select-value'>\"+namearea+\"</div>\";\n               output+=\"     </div>\";\n               output+=\"   </div>\";\n               output+=\" </a>\";\n          output+='</div>';\n\n\n\n     output+=\"</div>\";\n  output+=\"</div>\";\n\n  $$(mainView.activePage.container).find('.branch_distance').html(output);\n  displayLanguage();\n}\n\nfunction branchesMap(){\n  var output='';\n  var areaId=mainView.activePage.query.query;\n  output+=\"<div class='row'>\";\n     output+=\"<div class='col-100 map_wrapper'>\";\n        output+=\"<div class='map_canvas' id='map_canvas'> </div>\";\n      output+='<div id=\"searchBox\">';\n               output+=\"<a href='#' class='item-link smart-select select-style' data-open-in='picker'  data-back-on-select='true'>\";\n               output+=\"   <select name='area' id='map_area'>\";\n               output+=\" <option value='' >Select </option>\";\n               var namearea='';\n               for(var i=0;i<Areas.length;i++){\n                 var selected='';\n            //     console.log('jjj',areaId);\n            //     console.log('ss',Areas[i].Id);\n                 if(Areas[i].Id==areaId){\n                    selected='selected=\"selected\"';\n                    namearea=Areas[i].Name;\n                 }\n                 output+=\" <option value='\"+Areas[i].Id+\"' \"+selected+\" >\"+Areas[i].Name+\"</option>\";\n               }\n        //       console.log('namearea',namearea)\n               output+=\"   </select>\";\n               output+=\"   <div class='item-content'>\";\n               output+=\"     <div class='item-inner'>\";\n            //   output+=\"             <div class='item-title'  data-i18n='profile.area'>profile.area</div>\";\n               output+=\"  <div class='item-after smart-select-value' >\"+namearea+\"</div>\";\n               output+=\"     </div>\";\n               output+=\"   </div>\";\n               output+=\" </a>\";\n          output+='</div>';\n\n          output+='<div class=\"branch_data\"></div>';\n\n\n     output+=\"</div>\";\n  output+=\"</div>\";\n\n  $$(mainView.activePage.container).find('.brnches_map').html(output);\n}\nmyApp.onPageAfterAnimation('branches',function(e){\n  //form_area\n  requires=['area'];\n  formId='form_area';\n  $$('.input-clear-button').html('');\n  branchesListerner();\n});\nfunction branchesListerner(){\n  $$('#'+formId).on('submit',branchesData);\n\n  //$$('#'+formId).on('submitted',submitFormResult);\n   //$$(mainView.activePage.container).find('#find_branches').off('click',CheckBranches());\n}\nfunction branchesData(e){\n//  e.preventDefault();\n  if(checkRequires(requires,formId)){\n    $$('#'+formId).find('.input-clear-button').html('');\n  var areaId=  $$(mainView.activePage.container).find('#form_area_area').val()\n    mainView.router.loadPage('templates/brnches_map.html?query='+areaId);\n    return false;\n  }\n  return false;\n}\nfunction drawBranches(){\n  var output=\"\";\n      output+=\"<div class='row'>\";\n\n\n      output+=\"<div class='col-100 branches_bg bg_cover' style='background-image:url(images/branch_2.jpeg)'> </div>\";\n    //  output+=\"<div class='col-100 branches_bg bg_cover' style='background-image:url(images/branch.jpg)'> </div>\";\n\n      output+=\"<div class='col-100 find_branche_screen'>\";\n         output+=\"<img  src='images/pin_branch.png' />\";\n\n         output+=\"<h3 class='text_uppercase'  data-i18n='profile.choose'>profile.choose</h3>\";\n\n         output+=\"<form method='post' class='ajax-submit col-90 auto-view row' id='form_area'>\";\n         output+= \"<div class='item-input-wrap col-100 row form_area_area_parent'>\";\n\n         output+=\"<a href='#' class=' col-100 item-link smart-select select-style' data-open-in='picker'  data-back-on-select='true'>\";\n         output+=\"   <select name='area' id='form_area_area'>\";\n         output+=\" <option value='' data-i18n='profile.Select'>profile.Select </option>\";\n         for(var i=0;i<Areas.length;i++){\n           output+=\" <option value='\"+Areas[i].Id+\"' >\"+Areas[i].Name+\"</option>\";\n         }\n         output+=\"   </select>\";\n         output+=\"   <div class='item-content'>\";\n         output+=\"     <div class='item-inner'>\";\n         output+=\"  <div class='item-after smart-select-value'  data-i18n='profile.area' >profile.area</div>\";\n         output+=\"     </div>\";\n         output+=\"   </div>\";\n         output+=\" </a>\";\n         output+=\"<span class='input-clear-button'></span>\";\n         output+=\"</div>\";\n\n         output+= \"<div class='item-input-wrap col-100'>\";\n         output+=\" <input type='submit' name='submit'   data-i18n='[value]profile.Findloc'  class='col-100 link_btn'>\";\n         output+=\"</div>\";\n         output+=\"</form>\";\n\n\n       output+=\"</div>\";\n\n      output+=\"</div>\";\n   $$(mainView.activePage.container).find('.branches').html(output);\n}\nfunction getItemProduct(id,callback){\n  for(var i=0;i<products.length;i++){\n    if(id==products[i].Id){\n      callback( products[i]);\n      break;\n    }\n  }\n}\nfunction getItemOffer(id,callback){\n  for(var i=0;i<offers.length;i++){\n    if(id==offers[i].Id){\n      callback(offers[i]);\n      break;\n    }\n  }\n}\nmyApp.onPageBeforeAnimation('product_details',function(e){\n  var paramters=mainView.activePage.query;\n  if(paramters.id){\n    if(paramters.filter==1){\n      getItemProduct(paramters.id,drawProductDetails);\n    }else {\n      getItemOffer(paramters.id,drawProductDetails);\n    }\n  }else{\n    mainView.router.loadPage('templates/index.html');\n  }\n  //getProductDetails(drawProductDetails);\n});\nfunction drawProductDetails(data){\n  //console.log(data);\n  $$('.navbar-inner span.detail').html(\"<span data-i18n='details.MODEL'>details.MODEL </span>\"+data.Model)\n  var output=\"\";\n  output+=\"<div class='row  text-center details_wrapp rev_pos'>\";\n\n        output+=\"<div class='max_wdth the_top_sec'>\";\n\n         output+=\"<div class='col-100'>\";\n            output+=\"<img class='img-fluid' src='images/almanara_logo_details.png' />\";\n          output+=\"</div>\";\n\n        output+=\"<div class='col-100'>\";\n            output+=\"<img class='img-fluid' src='images/panasonic.png' />\";\n        output+=\"</div>\";\n\n        output+=\"<div class='col-100'>\";\n            output+=\"<img  class='img-fluid'  src='\"+data.Image+\"' />\";\n            output+=\"<h3 class='mb-0 text_uppercase'  data-i18n='details.help'>details.help</h3>\";\n            output+=\"<div class='small gray_clr' data-i18n='details.Search'>details.Search</div>\";\n        output+=\"</div>\";\n\n    output+=\"</div>\";\n\n    output+=\"<div class='bottom_bar bottom_go_location'>\";\n      output+=\"<a href='templates/branches.html' class='col-100 '>\";\n\n        output+=\"<span class='col-100 arrow'>\";\n            output+=\"<div class='small gray_clr'  data-i18n='details.Let'>details.Let</div>\";\n            output+=\"<img src='images/arrow.png' />\";\n        output+=\"</span>\";\n\n        output+=\"<div class='col-100 '>\";\n            output+=\"<img src='images/white_pin.png' />\";\n        output+=\"</div>\";\n      output+=\"</a>\";\n\n\n    output+=\"</div>\";\n\n    output+=\"</div>\";\n\n   $$(mainView.activePage.container).find('.product_details').html(output);\n}\nfunction drawItemsProducts(products){\n  var output =\"\";\n  for(var i=0;i<products.length;i++){\n    output+=drawItemProduct(products[i]);\n  }\n   return output;\n}\nfunction drawItemsTransactions(data){\n  var output =\"\";\n   //add total point\n     $$(mainView.activePage.container).find('.totalWalt').html(data.Total_Points);\n     for(var i=0;i<data.transactions.length;i++){\n       output+=drawItemTransaction(data.transactions[i]);\n     }\n     $$(mainView.activePage.container).find('.transactionsList').html(output);\n}\nfunction drawItemTransaction(item){\n  var output=\"\";\n      output+=\"<div class='row col-95 items_stretch auto-view transactions_item'>\";\n         output+=\"<div class='col-40 text-center watts_count_inner'>\";\n             output+=\"<div class='watts_inner'>\";\n             output+=\"<span class='col-100 row watts_count'>\"+item.PriceWithDiscount+\"</span><span class='col-100 row watt' data-i18n='details.Watt'>details.Watt</span>\";\n            output+=\"</div>\";\n         output+=\"</div>\";\n         output+=\"<div class='col-60 row'>\";\n             output+=\"<div class='col-100 '>\";\n                  output+=\"<h3 class='my-0'>\"+item.Name+\"</h3>\";\n                  output+=\"<div class='mb-20  gray_clr s_small'>\"+item.Description+\"</div>\";\n            output+=\"</div>\";\n            output+=\"<div class='small row col-100 '>\";\n               output+=\"<div class='col-100  row' data-i18n='details.Date'>details.Date</div>\";\n               var d = new Date(item.Date);\n                var date = d.getDate()+'/'+d.getMonth()+'/'+d.getFullYear();\n               output+=\"<div class='col-100 gray_clr row'> \"+date+\"</div>\";\n           output+=\"</div>\";\n         output+=\"</div>\";\n      output+=\"</div>\";\n  return output;\n\n}\nfunction drawItemsOffers(offers){\n//  console.log('offers',offers);\n  var output =\"\";\n     for(var i=0;i<offers.length;i++){\n       output+=drawItemOffer(offers[i]);\n     }\n   return output;\n}\nfunction drawItemOffer(item){\n//console.log('item',item);\n//console.log('Model',item.Model);\n  var output=\"\";\n  var d = new Date(item.ExpiryDate);\n   var date = d.getDate()+'/'+d.getMonth()+'/'+d.getFullYear();\n\n      output+=\"<a class='product_item offer_item row col-95 auto-view' href='templates/product_details.html?id=\"+item.Id+\"&filter=2' class='offer_item'>\";\n          output+=\"<div class='row col-100'>\";\n            // output+=\"<div class='col-50'><img src='images/20_icon.png'/>\"+item.discount+\"</div>\";\n              output+=\"<div class='col-50 '></div>\";\n             output+=\"<div class='col-50 text-right s_small' ><span data-i18n='details.Expiry'>details.Expiry :</span> \"+date+\"</div>\";\n          output+=\"</div>\";\n\n          output+=\"<div class='row col-100'>\";\n            output+=\"<div class='col-100 product_img text-center'>\";\n               // output+=\"<div class='col-50 discount_img'><img src='images/20_icon.png'/>\"+item.DiscountPercent+\"</div>\";\n                output+=\"<img class='img-fluid' src='\"+item.Image+\"' />\";\n            output+=\"</div>\";\n          output+=\"</div>\";\n\n          output+=\"<div class='details row col-100'>\";\n          output+=\"<div class='col-70'>\";\n          output+=\"<h1 class='model' ><span  data-i18n='details.MODEL'>details.MODEL </span>\"+ item.Model +\"</h1>\";\n          output+=\"</div>\";\n          output+=\"<div class='col-30 text-right before_after'>\";\n              output+=\"<div class='before small gray_clr'>\"+item.OriginalPrice+\"<span  data-i18n='details.Watts' > details.Watts</span></div>\";\n                 output+=\"<h2>\"+item.PriceWithDiscount+\"<span   data-i18n='details.Watts'> details.Watts </span></h2>\";\n              output+=\"</div>\";\n\n        output+=\"<div class='col-100 desc s_small bb'>\"+item.Description+\"</div>\";\n\n\n         output+=\"</div>\";\n\n      output+=\"</a>\";\n  return output;\n}\nfunction drawItemProduct(item){\n  var output=\"\";\n      output+=\"<a  href='templates/product_details.html?id=\"+item.Id+\"&filter=1' class='row col-95 auto-view text-center product_item'>\";\n      output+=\"<div class='col-100 row'>\";\n          output+=\"<div class='col-100 product_img text-center'>\";\n            output+=\"<img class='img-fluid' src='\"+item.Image+\"' />\";\n           output+=\"</div>\";\n      output+=\"</div>\";\n\n      output+=\"<div class='row col-100'>\";\n        output+=\"<div class='col-100'>\";\n           output+=\"<h1 class='model' ><span data-i18n='details.MODEL'> details.MODEL </span>\"+item.Model+\"</h1>\";\n           output+=\"<div class='col-100 desc s_small'>\"+item.Description+\"</div>\";\n        output+=\"</div>\";\n      output+=\"</div>\";\n      output+=\"</a>\";\n  return output;\n}\n//when user select img\n function readURL(input) {\n            if (input.files && input.files[0]) {\n                var reader = new FileReader();\n                reader.onload = function(e) {\n                    $('#the_user_img').css('background-image', \"url(\" + e.target.result + \")\");\n                    $('.the_user_img').css('opacity', \"1\");\n                   //$('#the_user_img').attr('src', e.target.result) .width(150)\n\n                };\n                reader.readAsDataURL(input.files[0]);\n            }\n        }\n//\nmyApp.onPageBeforeAnimation('profile',function(e){\n  //drawNavbarEmpty();\n\n  var userData = window.localStorage.getItem(\"UserData\");\n       userData=JSON.parse(userData);\n  var output=\"\";\n  output+=\"<div class='row'>\";\n\n    output+=\"<form method='post' class='ajax-submit gray_clr text-center min_h justify_content_ col-90 auto-view row' id='profile_form' enctype='multipart/form-data'>\";\n\n      output+= \"<div class='my-1 item-input-wrap col-100 profile_form_avatar_parent' style='background-image:url()'>\";\n        output+=\"<div class='avatar_img'><img src='images/avatar.png'/>\";\n\n          output+=\"<div id='the_user_img' class='the_user_img'></div>\";\n          output+=\"<span class='photo_txt' data-i18n='profile.photo'>profile.photo</span>\";\n          output+=\"<span class='cam_ico'><img src='images/camara.png'></span>\";\n\n          output+= \"<input type='hidden' name='userId' value='\"+userData.Id+\"'>\";\n          output+= \"<input type='file' name='Image' onchange='readURL(this);' id='profile_form_Image' accept='image/*;capture=camera'>\";\n        output+=\"</div>\";\n        output+=\"<span class='input-clear-button'></span>\";\n\n      output+=\"</div>\";\n\n      output+=\"<h1 class='col-100 my-1 red_clr'>Welcome</h1>\";\n      output+=\"<div class='col-100 my-1' data-i18n='profile.first'>profile.first<br/><span  data-i18n='profile.complete'>profile.complete</span></div>\";\n      output+= \"<div class='my-1 item-input-wrap col-100'>\";\n\n        output+=\" <input type='submit' name='submit'  data-i18n='[value]profile.Save' class='btn-submit'>\";\n      output+=\"</div>\";\n    output+=\"</form>\";\n    output+= \"<div class='item-input-wrap col-90 auto-view my-1'>\";\n      output+=\"<a class='skip_to_profile gray_clr' href='templates/show_profile.html' data-i18n='profile.Skip'>profile.Skip >></a>\";\n    output+=\"</div>\";\n\n    output+=\"</div>\";\n\n  $$(mainView.activePage.container).find('.profile').html(output);\n});\nmyApp.onPageAfterAnimation('profile',function(e){\n   requires=['Image'];\n   formId='profile_form';\n  var urlReq=baseUrlMain+'/ManageCustomer/UpdateImageProfile'\n  listnerProfileFormAction(urlReq);\n});\n\n\n//login Page\nmyApp.onPageAfterAnimation('login',function(e){\n   requires=['Email','Password'];\n   formId='login_form';\n   var urlReq=baseUrlMain+'ManageAccount/Login'\n   listnerFormAction(urlReq);\n});\nfunction listnerFormAction(urlReq){\n  $$('#'+formId).attr('action',urlReq);\n  $$('#'+formId).on('submit',submitForm);\n  $$('#'+formId).on('submitted',submitFormResult);\n//  $$('#'+formId).off('submit',submitForm(requires,formId));\n}\nfunction listnerRegisterFormAction(urlReq){\n//  console.log(requires);\n  $$('#'+formId).attr('action',urlReq);\n $$('#'+formId).on('form:beforesend',submitFormRegister);\n  $$('#'+formId).on('submitted',submitFormResultRegister);\n//  $$('#'+formId).off('submit',submitForm(requires,formId));\n}\nfunction listnerEditProfileFormAction(urlReq){\n  //console.log(requires);\n  $$('#'+formId).attr('action',urlReq);\n  $$('#'+formId).on('form:beforesend',submitFormProfile);\n  $$('#'+formId).on('submitted',submitFormResultProfile);\n//  $$('#'+formId).off('submit',submitForm(requires,formId));\n}\nfunction listnerverificationFormAction(urlReq){\n  $$('#'+formId).attr('action','#');\n  $$('#'+formId).on('form:beforesend',submitFormResultVerification);\n  //number_1','number_2','number_3','number_4'\n  //$$('#'+formId).on('submitted',submitFormResultVerification);\n//  $$('#'+formId).off('submit',submitForm(requires,formId));\n}\nfunction listnerProfileFormAction(urlReq){\n  //console.log(urlReq);\n  //console.log(formId);\n  $$('#'+formId).attr('action',urlReq);\n  $$('#'+formId).on('submit',submitForm);\n  //number_1','number_2','number_3','number_4'\n  $$('#'+formId).on('submitted',submitFormResultProfile);\n//  $$('#'+formId).off('submit',submitForm(requires,formId));\n}\nvar mobileUser;\nfunction listnerForgetFormAction(urlReq){\n  $$('#'+formId).attr('action',urlReq);\n  $$('#'+formId).on('submit',submitForm);\n  $$('#'+formId).on('submitted',submitFormResultForget);\n//  $$('#'+formId).off('submit',submitForm(requires,formId));\n}\nfunction listnerchangePasswordFormAction(urlReq){\n  $$('#'+formId).attr('action',urlReq);\n  $$('#'+formId).on('submit',submitForm);\n  $$('#'+formId).on('submitted',submitFormResultChangePassword);\n//  $$('#'+formId).off('submit',submitForm(requires,formId));\n}\nfunction submitFormResult(e){\n  var xhr = e.detail.xhr; // actual XHR object\n  var data = e.detail.data; // Ajax response from action file\n   data = JSON.parse(data);\n\n  if(data.Data.Status==200){\n    $$('#'+formId).find('.input-clear-button').html('');\n     var user={\n       'email':  $$('#'+formId+'_Email').val(),\n       'password':  $$('#'+formId+'_Password').val(),\n     };\n    user=JSON.stringify(user);\n    var userData=JSON.stringify(data.Data.User);\n    userInfo=data.Data.User;\n    window.localStorage.setItem(\"User\",user);\n    window.localStorage.setItem(\"UserData\",userData);\n  // console.log(data.Data.User);\n   //console.log(data.Data.ProfileImage);\n    if(data.Data.User.ProfileImage){\n      mainView.router.loadPage('templates/show_profile.html');\n    }else{\n      mainView.router.loadPage('templates/profile.html');\n    }\n    //save User\n  }else{\n    showError(data.Data.Message);\n  }\n}\nfunction submitFormResultChangePassword(e){\n  var xhr = e.detail.xhr; // actual XHR object\n  var data = e.detail.data; // Ajax response from action file\n   data = JSON.parse(data);\n  if(data.Data.Status==200){\n    $$('#'+formId).find('.input-clear-button').html('');\n     var user={\n       'email': data.Data.User.Email,\n       'password':data.Data.User.Password,\n     };\n    user=JSON.stringify(user);\n    window.localStorage.setItem(\"User\",user);\n    var userData=JSON.stringify(data.Data.User);\n    window.localStorage.setItem(\"UserData\",userData);\n    if(data.Data.User.ProfileImage){\n      mainView.router.loadPage('templates/show_profile.html');\n    }else{\n      mainView.router.loadPage('templates/profile.html');\n    }\n    //save User\n  }else{\n\n  //  console.log(data.Data.Message);\n    $$('.input-clear-button').html(\"\");\n    //$$('.input-clear-button.global_error').html(data.Message);\n    showError(data.Data.Message);\n  }\n}\nvar user;\nfunction submitFormResultRegister(e){\n  var xhr = e.detail.xhr; // actual XHR object\n  var data = e.detail.data; // Ajax response from action file\n   data = JSON.parse(data);\n   hideLoader();\n\n  if(data.Data.Status==200){\n    $$('#'+formId).find('.input-clear-button').html('');\n     user={\n       'email':  $$('#'+formId+'_Email').val(),\n       'password':  $$('#'+formId+'_Password').val(),\n       'mobile':  $$('#'+formId+'_Phone').val(),\n     };\n     user.id=data.Data.User.Id;\n    // console.log(user);\n    var user_country=window.localStorage.getItem(\"appLanguage\");\n       user_country=JSON.parse(user_country);\n      var $mobile=user.mobile;\n       var urlReq=baseUrlMain+'ManageAccount/ForgetPassword'\n    $.post(urlReq,\n    {\n        mobile:$mobile,\n        countyId:user_country.Country\n    },\n    function(data, status){\n      //  console.log(\"Data: \" + data + \"\\nStatus: \" + status);\n    });\n     mainView.router.loadPage('templates/verification.html?q=1');\n    //save User\n  }else{\n  //  console.log('data.Data.Message',data.Data.Message);\n    showError(data.Data.Message);\n    mySwiper.slideTo('0');\n  }\n}\nfunction submitFormResultProfile(e){\n  var xhr = e.detail.xhr; // actual XHR object\n  var data = e.detail.data; // Ajax response from action file\n   data = JSON.parse(data);\n  // console.log(data);\n/*\n  if(data.Data.Status==200){\n    $$('#'+formId).find('.input-clear-button').html('');\n     user={\n       'email':  $$('#'+formId+'_Email').val(),\n       'password':  $$('#'+formId+'_Password').val(),\n       'mobile':  $$('#'+formId+'_Phone').val(),\n     };\n    var user_country=window.localStorage.getItem(\"appLanguage\");\n       user_country=JSON.parse(user_country);\n      var $mobile=user.mobile;\n       var urlReq=baseUrlMain+'ManageAccount/ForgetPassword'\n    $.post(urlReq,\n    {\n        mobile:$mobile,\n        countyId:user_country.Country\n    },\n    function(data, status){\n        console.log(\"Data: \" + data + \"\\nStatus: \" + status);\n    });\n     mainView.router.loadPage('templates/verification.html?q=1');\n    //save User\n  }else{\n    console.log('data.Data.Message',data.Data.Message);\n    showError(data.Data.Message);\n    mySwiper.slideTo('0');\n  }*/\n}\nfunction resendCode(){\n  $$('.resendcodeUser').removeClass('hidden');\n  var user_country=window.localStorage.getItem(\"appLanguage\");\n     user_country=JSON.parse(user_country);\n     var mobile=$$('#verif_form_mobile').val();\n\n     var urlReq=baseUrlMain+'ManageAccount/ForgetPassword'\n  $.post(urlReq,\n  {\n      mobile:mobile,\n      countyId:user_country.Country\n  },\n  function(data, status){\n\n    $$('.resendcodeUser').addClass('hidden');\n    $$('.resendcodeUserMsg').html('done');\n\n    //  console.log(\"Data: \" + data + \"\\nStatus: \" + status);\n  });\n}\nvar verfication_user;\nfunction submitFormResultVerification(e){\n  var xhr = e.detail.xhr; // actual XHR object\n  var urlReq=baseUrlMain+'ManageAccount/Verification';\n  var flag=true;\n  if(user){\n    user.mobile=$$('#'+formId+'_mobile').val();\n    //changeuserMobile\n    if(!$$('#verif_form_mobile').hasClass('disable')){\n      var req=baseUrlMain+'ManageAccount/ChangePhone'\n      $.post(req,\n        {\n          UserId:user.id,\n          NewPhone:user.mobile,\n        },\n        function(data, status){\n      //    console.log(data);\n          if(data.Data.Status==200){\n            flag=true;\n\n          }else{\n            flag=false;\n            $$('#'+formId+' .verif_form_number_parent').find('.input-clear-button').html(data.Data.Message);\n          }\n        });\n\n      }\n  }\n\n  if(flag&&checkRequiresMobile(requires,formId)){\n    $$('#'+formId).find('.input-clear-button').html('');\n    var code=$$('#'+formId+'_number_1').val()+$$('#'+formId+'_number_2').val()+$$('#'+formId+'_number_3').val()+$$('#'+formId+'_number_4').val();\n    var urlReq=baseUrlMain+'ManageAccount/Verification'\n    $.post(urlReq,\n      {\n        mobile:$$('#'+formId+'_mobile').val(),\n        code:code,\n      },\n      function(data, status){\n        if(data.Data.Status==200){\n          verfication_user=data.Data.User;\n           if(mainView.activePage.query.q==1){\n            mainView.router.loadPage('templates/login.html');\n          }else{\n            mainView.router.loadPage('templates/change_password.html');\n          }\n        }else{\n          $$('#'+formId+' .verif_form_number_parent').find('.input-clear-button').html(data.Data.Message);\n        }\n      });\n  }\n  xhr.abort();\n  return false;\n  /*var data = e.detail.data; // Ajax response from action file\n        console.log(data);\n   data = JSON.parse(data);\n\n  if(data.status==200){\n    $$('#'+formId).find('.input-clear-button').html('');\n    mainView.router.loadPage('templates/change_password.html');\n    //save User\n  }else{\n    for (var k in data.messages){\n      if(k=='mobile'){\n        $$('#'+formId+' .'+formId+'_'+k+'_parent').find('.input-clear-button').html(data.messages[k]);\n      }else {\n        $$('#'+formId+' .'+formId+'_number'+'_parent').find('.input-clear-button').html(data.messages[k]);\n      }\n    }\n  }*/\n}\nfunction submitFormResultProfile(e){\n  var xhr = e.detail.xhr; // actual XHR object\n  var data = e.detail.data; // Ajax response from action file\n   data = JSON.parse(data);\n   hideLoader();\n\n  if(data.Data.Status==200){\n    var userData=JSON.stringify(data.Data.User);\n    window.localStorage.setItem(\"UserData\",userData);\n    $$('#'+formId).find('.input-clear-button').html('');\n/*    var userData = window.localStorage.getItem(\"UserData\");\n     userData=JSON.parse(userData);\n*/\n\n    if(data.Data.User.ProfileImage){\n      mainView.router.loadPage('templates/show_profile.html');\n    }else{\n      mainView.router.loadPage('templates/profile.html');\n    }\n    //save User\n  }else{\n    showError(data.Data.Message);\n  }\n}\nfunction submitFormResultForget(e){\n  var xhr = e.detail.xhr; // actual XHR object\n  var data = e.detail.data; // Ajax response from action file\n   data = JSON.parse(data);\n   mobileUser=$$('#forget_password_form_mobile').val();\n  if(data.Data.Status==200){\n    $$('#'+formId).find('.input-clear-button').html('');\n  //  window.localStorage.setItem(\"Verfication\",data.verificationNumber);\n    mainView.router.loadPage('templates/verification.html?q=2');\n    //save User\n  }else{\n    showError(data.Data.Message);\n  }\n}\n\nfunction showError(msg){\n//  console.log(msg);\n  var arr = Array.from(Object.keys(msg), k=>msg[k]);\n//  console.log(arr.length);\n\n  if(typeof msg=='string'){\n    $$('#'+formId+' .global_error').html(msg);\n  }\n  if(arr.length>0){\n    for (var k in msg){\n      $$('#'+formId+' .'+formId+'_'+k+'_parent').find('.input-clear-button').html(msg[k]);\n    }\n  }\n\n}\nfunction submitForm(e){\n  //var xhr = e.detail.xhr;\n   document.activeElement.blur();\n   if(checkRequires(requires,formId)){\n     $$('#'+formId).find('.input-clear-button').html('');\n     /*       window.localStorage.setItem(\"UserLanguage\", $$('#'+formId +'#'+formId+'_language').val());\n     window.localStorage.setItem(\"UserCountry\", $$('#'+formId +'#'+formId+'_country').val());\n     */    //   add to storage\n     //   mainView.router.loadPage('templates/visitor.html')\n     if(formId=='profile_form'){\n       showLoader();\n     }\n   }\n   //xhr.abort();\n   return false;\n\n}\nfunction submitFormRegister(e){\n  var xhr = e.detail.xhr;\n   document.activeElement.blur();\n   console.log('register');\n   var slide=0;\n   showLoader();\n\n   if(!checkRequiresValidation(requires,formId)){\n     hideLoader();\n     var ele= $('.registerScreen .input-clear-button');\n     var ele2= $('.password_screen .input-clear-button');\n     console.log(ele,'ele');\n     console.log(ele2,'ele2');\n\n     var error=false;\n     for(var i=0 ;i<ele.length ;i++){\n       console.log($(ele[i]),'s');\n       console.log($(ele[i]).text(),'s');\n       if($(ele[i]).text()){\n         error=true;\n         slide=0;\n         console.log(slide);\n         break;\n       }\n     }\n     if(!error){\n       for(var i=0; i<ele2.length ;i++){\n         console.log($(ele2[i]),'s');\n         console.log($(ele2[i]).text(),'s');\n         if($(ele2[i]).text()){\n           slide=1;\n           console.log(slide);\n           break;\n         }\n       }\n     }\n     mySwiper.slideTo(slide);\n     xhr.abort();\n     return false;\n   }else if($$('#'+formId+' #'+formId+'_ConfirmPassword').val()!==$$('#'+formId+' #'+formId+'_Password').val()){\n     hideLoader();\n     $$('#'+formId+' .'+formId+'_ConfirmPassword_parent').find('.input-clear-button').html('<span data-i18n=\"req.pass\">req.pass</span>');\n     changeLaguage();\n     mySwiper.slideTo('1');\n     xhr.abort();\n     return false;\n   }\n\n}\nfunction submitFormProfile(e){\n  var xhr = e.detail.xhr;\n   document.activeElement.blur();\n\n   if(!checkRequires(requires,formId)){\n     xhr.abort();\n     return false;\n   }\n}\nmyApp.onPageBeforeAnimation('login',function(e){\n\n  checkUser();\n  var output=\"\";\n      output+=\"<div class='row bg_country ' style='background-image:url(images/vistor_bg.jpg)'>\";\n\n        output+=\"<div class='text_center margin-data col-100'>\";\n          output+= \"<img src='images/language_logo.png'/>\";\n        output+=\"</div>\";\n\n        output+=\"<div class='row col-100'>\";\n          output+=\"<h2 class='col-100  text-center title_center' data-i18n='login.Title'>login.Title</h2>\";\n          output+=\"<form method='post' class='ajax-submit col-90 auto-view row' id='login_form'>\";\n         output+= \"<div class='item-input-wrap col-100 row login_form_Email_parent'>\";\n           output+= \"<input type='email' name='Email' id='login_form_Email'  data-i18n='[placeholder]login.Email'   class='input_text  col-100'>\";\n           output+=\"<span class='input-clear-button'></span>\";\n         output+=\"</div>\";\n         output+= \"<div class='item-input-wrap col-100 row login_form_Password_parent'>\";\n           output+= \"<input type='password' name='Password' id='login_form_Password'  data-i18n='[placeholder]login.Password' class='input_text  col-100'>\";\n           output+=\"<span class='input-clear-button'></span>\";\n         output+=\"</div>\";\n\n            output+=\"<div class='global_error col-90 input-clear-button'></div>\";\n\n         output+= \"<div class='item-input-wrap col-100'>\";\n            output+=\" <input type='submit' name='submit'  data-i18n='[value]login.Now'   class='btn-submit'>\";\n         output+=\"</div>\";\n         output+=\"<div class='forget_password col-100'><a href='templates/forgot_password.html'  data-i18n='login.Forget'>login.Forget</a></div>\";\n          output+=\"</form>\";\n\n          output+=\"<div class=' col-100 row text-agreement'>\";\n          output+=\"<p class='col-90 text-center' data-i18n='login.Signby' >login.Signby</p>\";\n          output+=\"</div>\";\n        output+=\"</div>\";\n\n      output+=\"</div>\";\n  $$(mainView.activePage.container).find('#login').html(output);\n});\n//forgot_password Page\nmyApp.onPageBeforeAnimation('forgot_password',function(e){\n  checkUser();\n\n  var appLanguage=window.localStorage.getItem(\"appLanguage\");\n  appLanguage=JSON.parse(appLanguage);\n  var output=\"\";\n      output+=\"<div class='row bg_country align_items_center' style='background-image:url(images/forget_bg.jpg)'>\";\n\n        output+=\"<div class='row col-100 forget'>\";\n          output+=\"<h1 class='col-100 my-0  text-center title_center' data-i18n='forget.Title'> forget.Title </h1>\";\n          output+=\"<div class='my-1 col-90  text-center my-1 title_center center_box'>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod</div>\";\n          output+=\"<form method='post' class='ajax-submit col-90 auto-view row' id='forget_password_form'>\";\n         output+= \"<div class='item-input-wrap col-100 row forget_form_mobile_parent'>\";\n           output+= \"<input type='tel' name='mobile' id='forget_password_form_mobile' data-i18n='[placeholder]forget.Phone'  class='input_text  col-100'>\";\n           output+= \"<input type='hidden' name='countyId' value='\"+appLanguage.Country+\"'>\";\n           output+=\"<span class='input-clear-button global_error'></span>\";\n         output+=\"</div>\";\n         output+= \"<div class='item-input-wrap col-100'>\";\n            output+=\" <input type='submit' name='submit' data-i18n='[placeholder]forget.Send'   class='btn-submit'>\";\n         output+=\"</div>\";\n\n        output+=\"</div>\";\n\n      output+=\"</div>\";\n\n\n  $$(mainView.activePage.container).find('#forgot_password').html(output);\n});\n\n\nmyApp.onPageAfterAnimation('forgot_password',function(e){\n  requires=['mobile'];\n  formId='forget_password_form';\n  var urlReq=baseUrlMain+'ManageAccount/ForgetPassword'\n  listnerForgetFormAction(urlReq);\n});\n\n//change_password Page\nmyApp.onPageBeforeAnimation('change_password',function(e){\n  var output=\"\";\n      output+=\"<div class='row'>\";\n      output+=\"<div class='col-100 verification_title change_password_title'>\";\n        output+=\"<h1 data-i18n='ChangePassword.change'>ChangePassword.change</h1>\";\n        output+=\"<img src='images/password_icon.png'>\";\n      output+=\"</div>\";\n      output+=\"<form method='post' class='ajax-submit col-90 auto-view row' id='change_password_form'>\";\n      output+=\"<div class='col-100  change_password_form_password_parent'>\";\n      output+= \"<input type='hidden' name='email' value=\"+verfication_user.Email+\"  class='input_text  col-90 '  >\";\n      output+= \"<input type='password' name='password' data-i18n='[placeholder]ChangePassword.Password' id='change_password_form_password'  class='input_text  col-90 '  >\";\n      output+=\"<span class='input-clear-button'></span>\";\n      output+=\"</div>\";\n      output+=\"<div class='col-100  change_password_form_confirm_password_parent'>\";\n      output+= \"<input type='password' name='confirm_password' data-i18n='[placeholder]ChangePassword.PasswordConfirm'  id='change_password_form_confirm_confirm_password_parent' class='input_text  col-90 '  >\";\n      output+=\"<span class='input-clear-button'></span>\";\n      output+=\"</div>\";\n\n      output+=\"<span class='input-clear-button global_error'></span>\";\n      output+=\"<div class='col-100 '>\";\n       output+=\" <input type='submit' name='submit' data-i18n='[placeholder]ChangePassword.changePassword'   class='col-100 btn-submit'>\";\n      output+=\"</div>\";\n\n      output+=\"</form>\";\n      output+=\"</div>\";\n  $$(mainView.activePage.container).find('.change_password').html(output);\n});\nmyApp.onPageAfterAnimation('change_password',function(e){\n // drawNavbarBack();\n  requires=['password','confirm_password'];\n  formId='change_password_form';\n  var urlReq=baseUrlMain+\"ManageAccount/ChangePassword\";\n  listnerchangePasswordFormAction(urlReq);\n});\n\nfunction drawIndex(){\n  checkUser();\n  var userData = window.localStorage.getItem(\"User\");\n   userInfo=JSON.parse(userData);\n\n  var output='';\n  output+='   <div  class=\"swiper-container home-slider swiper-init\" data-pagination=\".swiper-pagination\" data-space-between=\"0\">';\n  output+=\"             <img class='img-fluid intro-logo' src='images/almanara_logo.png'/>\";\n\n  output+=\" <div class='home_text home__bottom_text text-center abs-pos'>\";\n  output+=\"         <div class='inner'>\";\n  output+=\"             <span class='bold'  data-i18n='slider_text.Panasonic'>slider_text.Panasonic</span>\";\n  output+=\"             <span class='orange_colr'  data-i18n='slider_text.HomaAndLiving'>slider_text.HomaAndLiving</span>\";\n  output+=\"         </div>\";\n  output+=\"     </div>\";\n  output+='  <div class=\"swiper-pagination\"></div>';\n  output+=' <div class=\"swiper-wrapper \">';\n  if(AppMainData.Banners.length>0){\n    for(var i=0;i<AppMainData.Banners.length;i++){\n    //AppMainData.Banners[i].Image=  AppMainData.Banners[i].Image.replace(/ /g, '%20');\n    output+= \"<div class='swiper-slide'>\";\n    output+= \"  <div class='home_blured_img' style='background:url(\"+AppMainData.Banners[i].Image+\")'> </div>\";\n    output+= \"  <img class='home_img' src='\"+AppMainData.Banners[i].Image+\"'/> \";\n    if(userInfo){\n      if(userInfo.ProfileImage){\n        output+=\"         <a  class='next' href='templates/show_profile.html' data-i18n='slider_text.Next'> slider_text.Next</a>\";\n      }else{\n        output+=\"         <a  class='next' href='templates/profile.html' data-i18n='slider_text.Next'> slider_text.Next</a>\";\n      }\n    }else{\n      output+=\"         <a  class='next' href='templates/visitor.html' data-i18n='slider_text.Next'> slider_text.Next</a>\";\n    }\n\n    output+= \"</div>\";\n    //  output+=  \"<div class='swiper-slide' style='background:url(\"+AppMainData.Banners[i].Image+\")' >\";\n    //  output+=  \"<div class='home_text des text-center abs-pos'>\";\n  /*    output+=  \"<p class=''>\";\n      output+= \" We <span class='bold'>DELIVER</span> Quality  <p> Just For  You</p>\";\n  */  //  output+= \" </div>\";\n\n    //  output+= \"</div>\";\n    }\n  }else {\n\n    //AppMainData.Banners[i].Image=  AppMainData.Banners[i].Image.replace(/ /g, '%20');\n    output+= \"<div class='swiper-slide'>\";\n    output+= \"  <div class='home_blured_img' style='background:#000)'> </div>\";\n    if(userInfo){\n      if(userInfo.ProfileImage){\n        output+=\"         <a  class='next' href='templates/show_profile.html' data-i18n='slider_text.Next'> slider_text.Next</a>\";\n      }else{\n        output+=\"         <a  class='next' href='templates/profile.html' data-i18n='slider_text.Next'> slider_text.Next</a>\";\n      }\n    }else{\n      output+=\"         <a  class='next' href='templates/visitor.html' data-i18n='slider_text.Next'> slider_text.Next</a>\";\n    }\n    output+= \"</div>\";\n    //  output+=  \"<div class='swiper-slide' style='background:url(\"+AppMainData.Banners[i].Image+\")' >\";\n    //  output+=  \"<div class='home_text des text-center abs-pos'>\";\n    /*    output+=  \"<p class=''>\";\n      output+= \" We <span class='bold'>DELIVER</span> Quality  <p> Just For  You</p>\";\n    */  //  output+= \" </div>\";\n\n    //  output+= \"</div>\";\n\n\n\n  }\n\n  output+='       </div>';\n  output+='   </div>';\n  $$(mainView.activePage.container).find('.slider').html(output);\n  var swiper = new Swiper('.home-slider', {\n   pagination:'.swiper-pagination',\n });\n}\n\n$$('.deleted-callback').on('swipeout:deleted', function () {\n  app.dialog.alert('Thanks, item removed!');\n});\n\nfunction drawNavbarMenuPageTitleBack(title , clr ,title2){\n  var output=\"\";\n  output+=\"<div class='navbar-inner \"+clr+\"'>\";\n  output+=\"<div class='left'>\";\n    output+=\"<a href='#' class='link back'>\";\n    output+=\"  <i class='fa fa-angle-left' aria-hidden='true'></i>\";\n    output+=\"</a>\";\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'>\"+title+\"</div>\";\n      output+=\"<div class='right'>\";\n           output+=title2;\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n}\nvar notification;\nfunction getUserNotification(callback){\n  var userData = window.localStorage.getItem(\"UserData\",userData);\n  userData=JSON.parse(userData);\n  var url=baseUrlMain+'ManageGeneralData/GetAllNotifications?CustomerId='+userData.Id+'&LanguageId='+currentLang.Id;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n    //  console.log(data);\n      //data = JSON.parse(data);\n      if(data.Data){\n        notification=data.Data;\n        if(callback){\n          callback(notification);\n        }\n       }\n    }\n  });\n}\nfunction deleteNotification(id){\n  var url=baseUrlMain+'ManageGeneralData/DeleteNotifications?NotificationId='+id;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Post',\n    success: function ( data ) {\n    //  console.log(data);\n      //data = JSON.parse(data);\n      if(data.Data.Status==200){\n        //AppMainData=data.Data;\n    //    console.log('data',AppMainData);\n        $$('.noti_'+id).remove();\n       }\n    }\n  });\n\n}\nfunction drawNotificationData(data){\n  var output=\"\";\n   output+='<ul class=\"col-100\">';\n   if(data&&data.length==0){\n     output+='<li class=\"\">'; //appear if no notifications\n     output+='<div class=\"item-content swipeout-content\">';\n     output+='<div class=\"item-inner row col-100\">';\n     output+='<div class=\"item-title row col-100\" data-i18n=\"Notifications.no\">Notifications.no</div>';\n     output+=' </div>';\n     output+='</div>';\n     output+='</li>';\n   }\n   for(var i=0;i<data.length;i++){\n     output+='<li class=\"swipeout deleted-callback noti_'+data[i].Id+'\">';\n     output+='<div class=\"item-content swipeout-content\">';\n     output+='<div class=\"item-media\">';\n     output+='<img src=\"images/notification_list_ico.png\"/>';\n     output+='</div>';\n     output+='<div class=\"item-inner row col-100\">';\n\n     output+='<div class=\"item-title row col-100\">'+data[i].Name+'</div>';\n     output+='<div class=\"item-text row col-100\">';\n     output+=data[i].Description;\n     output+='</div>';\n     output+=' </div>';\n     output+='</div>';\n     output+='<div class=\"swipeout-actions-right\">';\n     output+='<a href=\"#\" data-confirm=\"Are you sure you want to delete this item?\"  data-confirm-title=\"Almanara\" class=\"swipeout-delete\" onclick=\"deleteNotification('+data[i].Id+')\">Delete</a>';\n     output+='</div>';\n     output+='</li>';\n   }\noutput+='</ul>';\n$$(mainView.activePage.container).find('.notifications_list .list-block').html(output);\n\n}\n myApp.onPageBeforeAnimation('notifications',function(e){\n   getUserNotification(drawNotificationData);\n  //drawNavbarMenuPageTitleBack('Notifications','gray','');\n\n\n})\n\nmyApp.onPageAfterAnimation('settings',function(e){\n  $$(document.body).on('change','#s_Language_settings', function(e){\n    var langId=$(this).val();\n    var lang=window.localStorage.getItem(\"appLanguage\");\n    lang=JSON.parse(lang);\n    lang.Language=langId;\n    var appLanguage=JSON.stringify(lang);\n\n    window.localStorage.setItem(\"appLanguage\",appLanguage);\n\n    for(var i=0;i< AppMainData.Language.length;i++){\n      if(AppMainData.Language[i].Id==langId){\n\n        currentLang=AppMainData.Language[i];\n        displayLanguage();\n        break;\n      }\n\n    }\n\n  });\n});\nmyApp.onPageBeforeAnimation('settings',function(e){\n  //drawNavbarMenuPageTitle('Settings','gray','');\n   var output=\"\";\n   output+='<ul class=\" row col-100\">';\n      output+='<li class=\" row col-100\">';\n         output+='<div class=\"row col-100 item-content\">';\n            output+='<div class=\"item-inner\">';\n               output+='<div class=\"item-title label\"  data-i18n=\"settings.Alerts\">settings.Alerts</div>';\n               output+='<div class=\"item-input\">';\n                  output+='<label class=\"label-switch\">';\n                     output+='<input type=\"checkbox\">';\n                     output+='<div class=\"checkbox\"></div>';\n                  output+='</label>';\n               output+='</div>';\n           output+=' </div>';\n        output+=' </div>';\n      output+='</li>';\n      output+='<li class=\" row col-100 change_password\">';\n         output+='<a href=\"templates/change_password.html\" class=\"col-100 item-link item-content\">';\n           output+=' <div class=\"item-inner\">';\n              output+=' <div class=\"item-title\" data-i18n=\"settings.Change\">settings.Change</div>';\n            output+='</div>';\n        output+=' </a>';\n      output+='</li>';\n      output+='<li class=\" row col-100\">';\n            output+=\"<a href='#' class='col-100 item-link smart-select ' data-open-in='picker'  data-back-on-select='true'>\";\n          output+=\"   <select name='s_Language_settings' id='s_Language_settings'>\";\n          output+=\" <option value='' data-i18n='profile.Select'>profile.Select </option>\";\n             for(var i=0;i< AppMainData.Language.length;i++){\n                output+=\" <option value='\"+AppMainData.Language[i].Id+\"' >\"+AppMainData.Language[i].NameEn+\"</option>\";\n             }\n          output+=\"   </select>\";\n            output+='<div class=\"item-content row col-100\">';\n               output+='<div class=\"item-inner\">';\n                 output+=' <div class=\"item-after\" data-i18n=\"settings.Language\">settings.Language</div>';\n               output+='</div>';\n           output+=' </div>';\n        output+=\" </a>\";\n\n     output+=' </li>';\n  output+=' </ul>';\n\n$$(mainView.activePage.container).find('.list-block').html(output);\n})\n\n\n\n\nfunction drawNavbarstaticpages(title,title2){\n\n    var output=\"\";\n  output+=\"<div class='navbar-inner static_nav'>\";\n  output+=\"<div class='left'>\";\n    output+=\"<a href='#' class='link back'>\";\n    output+=\"  <i class='fa fa-angle-left' aria-hidden='true'></i>\";\n    output+=\"</a>\";\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'>\"+title+\"</div>\";\n      output+=\"<div class='right'>\";\n           output+=title2;\n      output+=\"</div>\";\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n\n\n}\n\nmyApp.onPageBeforeAnimation('terms',function(e){\n  var output='';\n  output+= AppMainData.TermAndConditions;\n  $$(mainView.activePage.container).find('.terms').html(output);\n\n})\n\nmyApp.onPageBeforeAnimation('privacy',function(e){\n  var output='';\n  output+= AppMainData.Privacy;\n  $$(mainView.activePage.container).find('.privacy').html(output);\n\n})\nmyApp.onPageBeforeAnimation('howitworks',function(e){\n\n  var output='';\n  output+= AppMainData.HowItWork;\n  $$(mainView.activePage.container).find('.howitworks').html(output);\n\n})\n//amany\n\nfunction drawNavbartitle_icon_page(title,icon){\n\n    var output=\"\";\n  output+=\"<div class='navbar-inner Navbartitle_icon'>\";\n  output+=\"<div class='left'>\";\n    output+=\"<a href='#' class='link back'>\";\n    output+=\"  <i class='fa fa-angle-left' aria-hidden='true'></i>\";\n    output+=\"</a>\";\n  output+=\"</div>\";\n    output+=\"<div class='center sliding'>\"+title+\"</div>\";\n      output+=\"<div class='right'>\";\n      output+=\"</div>\";\n\n   output+=\"<div class='img_wrapp'><img src='images/contact_white_icon.png'></div>\";\n\n  output+=\"</div>\";\n  $$('.navbar_content').html(output);\n\n\n}\n\nmyApp.onPageBeforeAnimation('contact',function(e){\n  //drawNavbartitle_icon_page('contact','images/contact_white_icon.png');\n\n});\n//end amany\n\nfunction releaseApp(){\n//  drawNavbar();\n//  drawMenu();\n//if User Already Exists\n //Get Data From server\n //else New User\n//window.localStorage.removeItem(\"User\");\n//window.localStorage.clear();\nHideToolbar();\n\nshowLoader();\n var user = window.localStorage.getItem(\"User\");\n var newD=JSON.parse(user);\n //console.log(newD);\n  if(user&&user!=null){\n    getBasicUrl();\n    console.log('ser');\n    if(newD.id){\n      console.log(newD.id);\n\n      loginWithFBAgin();\n    }else{\n\n      var urlReq=baseUrlMain+'ManageAccount/Login'\n      user=JSON.parse(user);\n\n      userInfo=user;\n      $.post(urlReq,\n        {\n          Email:user.email,\n          Password:user.password\n        },\n        function(data, status){\n          if(data.Data.Status==200){\n            getAllLanguageList();\n          }else{\n            mainView.router.loadPage('index.html');\n          }\n        });\n    }\n\n  }else{\n    getBasicUrl(drawCountryLanguage);\n    //getBasicUrl(drawIndex);\n  }\n\n}\nfunction getBasicUrl(callback){\n  getAllData(callback);\n}\nfunction getAllData(callback){\n  var url=baseUrlMain+'ManageGeneralData/GetAllGeneralData?LanguageId=2&CountryId=0';\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //data = JSON.parse(data);\n      if(data.Data.Status==200){\n        AppMainData=data.Data;\n      //  console.log('data',AppMainData);\n\n      if(callback){\n        callback();\n      }\n\n       }\n    }\n  });\n}\nfunction getAllLanguageData(lang,callback){\n//  console.log('lang',lang);\n  var url=baseUrlMain+'ManageGeneralData/GetAllAreas?&LanguageId='+lang.Language;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //data = JSON.parse(data);\n  //    maxItems=data.Data.length;\n      if(data.Data){\n      //  console.log(data.Data);\n\n        Areas=data.Data;\n        AreasObj=arrayToObj(Areas);\n      }\n    }\n  });\n  var url=baseUrlMain+'ManageGeneralData/GetAllBranches?&LanguageId='+lang.Language;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //data = JSON.parse(data);\n  //    maxItems=data.Data.length;\n      if(data.Data){\n        Branches=data.Data;\n    //    console.log(Branches);\n        BranchesObj=arrayToObj(Branches);\n    //    console.log(BranchesObj);\n\n      }\n    }\n  });\n  var lisdata= window.localStorage.getItem(\"appLanguage\");\n  lisdata=JSON.parse(lisdata);\n\n  var url=baseUrlMain+'ManageGeneralData/GetAllGeneralData?LanguageId='+lang.Language+'&CountryId='+lisdata.Country;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //data = JSON.parse(data);\n      if(data.Data.Status==200){\n        AppMainData=data.Data;\n        if(callback){\n          callback(lang);\n        }\n        //  console.log('data',AppMainData);\n      //  mainView.router.loadPage('templates/slider.html');\n      }\n    }\n  });\n}\nfunction arrayToObj(arr) {\n  var rv = {};\n  for (var i = 0; i < arr.length; ++i)\n    rv[arr[i].Id] = arr[i];\n  return rv;\n}\nfunction getAllLanguageList(){\n  var lang=window.localStorage.getItem(\"appLanguage\");\n  lang=JSON.parse(lang);\n  var url=baseUrlMain+'ManageGeneralData/GetAllAreas?&LanguageId='+lang.Language;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //data = JSON.parse(data);\n  //    maxItems=data.Data.length;\n      if(data.Data){\n      //  console.log(data.Data);\n\n        Areas=data.Data;\n        AreasObj=arrayToObj(Areas);\n      }\n    }\n  });\n  var url=baseUrlMain+'ManageGeneralData/GetAllBranches?&LanguageId='+lang.Language;\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //data = JSON.parse(data);\n  //    maxItems=data.Data.length;\n      if(data.Data){\n    //    console.log(data.Data);\n        Branches=data.Data;\n        BranchesObj=arrayToObj(Branches);\n\n      }\n    }\n  });\n\n  var lisdata= window.localStorage.getItem(\"appLanguage\");\n  lisdata=JSON.parse(lisdata);\n\n  var url=baseUrlMain+'ManageGeneralData/GetAllGeneralData?LanguageId='+lang.Language+'&CountryId='+lisdata.Country;\n\n  $.ajax({\n    url: url,\n    processData: false,\n    type: 'Get',\n    success: function ( data ) {\n      //data = JSON.parse(data);\n      if(data.Data.Status==200){\n        AppMainData=data.Data;\n\n        //mainView.router.loadPage('templates/show_profile.html');\n\n        //  console.log('data',AppMainData);\n        mainView.router.loadPage('templates/slider.html');\n      }\n    }\n  });\n}\n\nfunction loginWithFB(){\n  console.log('loginWithFB');\n  facebookConnectPlugin.login([\"public_profile\",\"email\"],function(result){\n    //calling api after login success\n     facebookConnectPlugin.api(\"/me?fields=email,name,picture\",\n     [\"public_profile\",\"email\"]\n     ,function(userData){\n       console.log(userData);\n       var url=baseUrlMain+'ManageCustomer/CheckMail?mail='+userData.email;\n       $.get (url,\n       {\n         \"Email\":userData.email,\n       },\n       function(data, status){\n         console.log('data',data.Data);\n           if(data.Data=='Existing'){\n                var url=baseUrlMain+'ManageCustomer/LogInWithFacebook';\n                $.post(url,\n                {\n                  \"Email\":userData.email,\n          //        \"FirstName\":userData.name,\n            //      \"ProfileImage\":userData.picture.data.url\n                },\n                function(data, status){\n                  var obj={\n                    \"Email\":userData.email,\n                    \"FirstName\":userData.name,\n                    \"id\":userData.id,\n                    \"ProfileImage\":userData.picture.data.url\n                  };\n                  console.log('fb',data);\n                  if(data.Data&&data.Data.Status==200){\n                    var userDataUrl=JSON.stringify(data.Data.User);\n                    window.localStorage.setItem(\"User\",JSON.stringify(obj));\n                    window.localStorage.setItem(\"UserData\",userDataUrl);\n                    if(data.Data.User.ProfileImage){\n                      mainView.router.loadPage('templates/show_profile.html');\n                    }else{\n                      mainView.router.loadPage('templates/profile.html');\n                    }\n                  }\n                });\n\n           }else{\n             console.log(userData);\n             window.localStorage.setItem(\"userData\",JSON.stringify(userData));\n             mainView.router.loadPage('templates/register.html');\n           }\n       });\n       // $.ajax({\n       //   url: url,\n       //   processData: false,\n       //   type: 'Get',\n       //   success: function ( data ) {\n       //     //  hideLoader();\n       //     console.log('data',data.Data);\n       //       if(data.Data=='Existing'){\n       //            $.post(url,\n       //            {\n       //              \"Email\":userData.email,\n       //              \"FirstName\":userData.name,\n       //              \"ProfileImage\":userData.picture.data.url\n       //            },\n       //            function(data, status){\n       //              var obj={\n       //                \"Email\":userData.email,\n       //                \"FirstName\":userData.name,\n       //                \"id\":userData.id,\n       //                \"ProfileImage\":userData.picture.data.url\n       //              };\n       //              console.log('fb',data);\n       //              if(data.Data&&data.Data.Status==200){\n       //                var userDataUrl=JSON.stringify(data.Data.User);\n       //                window.localStorage.setItem(\"User\",JSON.stringify(obj));\n       //                window.localStorage.setItem(\"UserData\",userDataUrl);\n       //                if(data.Data.User.ProfileImage){\n       //                  mainView.router.loadPage('templates/show_profile.html');\n       //                }else{\n       //                  mainView.router.loadPage('templates/profile.html');\n       //                }\n       //              }\n       //            });\n       //\n       //       }else{\n       //         window.localStorage.setItem(\"userData\",JSON.stringify(userData));\n       //         mainView.router.loadPage('templates/register.html');\n       //       }\n       //     }\n       // });\n\n\n         //API success callback\n         // window.localStorage.setItem(\"userData\",JSON.stringify(userData));\n         // mainView.router.loadPage('templates/register.html');\n      //    var formData = new FormData();\n      //    formData.append('Email', userData.email);\n      //    formData.append('FirstName', userData.name);\n      // //   formData.append('LastName', userData.name);\n      // //   formData.append('facebookId', userData.id);\n      //    formData.append('ProfileImage', userData.picture.data.url);\n      //\n      //    var url=baseUrlMain+'ManageCustomer/LogInCustomerWithFacebook';\n      //    $.post(url,\n      //    {\n      //      \"Email\":userData.email,\n      //      \"FirstName\":userData.name,\n      //      \"ProfileImage\":userData.picture.data.url\n      //    },\n      //    function(data, status){\n      //      var obj={\n      //        \"Email\":userData.email,\n      //        \"FirstName\":userData.name,\n      //        \"id\":userData.id,\n      //        \"ProfileImage\":userData.picture.data.url\n      //      };\n      //      console.log('fb',data);\n      //      if(data.Data&&data.Data.Status==200){\n      //        var userDataUrl=JSON.stringify(data.Data.User);\n      //        window.localStorage.setItem(\"User\",JSON.stringify(obj));\n      //        window.localStorage.setItem(\"UserData\",userDataUrl);\n      // ///       console.log(data.Data.User);\n      //   //     console.log(data.Data.ProfileImage);\n      //        if(data.Data.User.ProfileImage){\n      //          mainView.router.loadPage('templates/show_profile.html');\n      //        }else{\n      //          mainView.router.loadPage('templates/profile.html');\n      //        }\n      //      }\n      //    });\n\n       //  var data={'UserId':userData.Id,'VoucherId':id};\n         /*$.ajax({\n           url: url,\n           \"method\": \"POST\",\n           \"processData\": false,\n           \"contentType\": \"application/json; charset=utf-8\",\n           \"data\": formData,\n           body:formData,\n           success: function ( data ) {\n             console.log(data);\n             if(data.Data&&data.Data.Status==200){\n               var userDataUrl=JSON.stringify(data.Data.User);\n               window.localStorage.setItem(\"User\",userData);\n               window.localStorage.setItem(\"UserData\",userDataUrl);\n               console.log(data.Data.User);\n               console.log(data.Data.ProfileImage);\n               if(data.Data.User.ProfileImage){\n                 mainView.router.loadPage('templates/show_profile.html');\n               }else{\n                 mainView.router.loadPage('templates/profile.html');\n               }\n             }*/\n          /*   if(data.Data&&data.Data.Status==200){\n\n\n              }*/\n          /* }\n         });*/\n\n         //alert(JSON.stringify(userData));\n      },function(error){\n         //API error callback\n       console.log(JSON.stringify(error));\n      });\n   },function(error){\n      //authenication error callback\n      console.log(JSON.stringify(error));\n  });\n}\nfunction loginWithFBAgin(){\n  console.log('fv');\n  var userData = window.localStorage.getItem(\"User\");\n   userData=JSON.parse(userData);\n   var url=baseUrlMain+'ManageCustomer/LogInCustomerWithFacebook';\n   $.post(url,\n   {\n     \"Email\":userData.Email,\n     \"FirstName\":userData.FirstName,\n     \"ProfileImage\":userData.ProfileImage\n   },\n   function(data, status){\n     if(data.Data&&data.Data.Status==200){\n       console.log('data',data);\n       var userDataUrl=JSON.stringify(data.Data.User);\n       window.localStorage.setItem(\"User\",JSON.stringify(userData));\n       window.localStorage.setItem(\"UserData\",userDataUrl);\n      // console.log(data.Data.User);\n       console.log(data.Data.ProfileImage);\n       getAllLanguageList();\n\n    //   mainView.router.loadPage('templates/slider.html');\n\n       // if(data.Data.User.ProfileImage){\n       //   mainView.router.loadPage('templates/show_profile.html');\n       //   console.log('pro');\n       // }else{\n       //   mainView.router.loadPage('templates/profile.html');\n       //   console.log('pros');\n       // }\n     }\n   });\n}\n\nfunction showLoader(){\n  $$('.loader-bg').removeClass('hidden');\n}\nfunction hideLoader(){\n  $$('.loader-bg').addClass('hidden');\n}\n//var baseUrl='https://www.mina-myworks.com/Reham/Service/';\nvar baseUrlMain='http://104.196.167.59:881/api/';\n\n\n//# sourceURL=webpack:///./www/js/my-app.js?");

/***/ })

/******/ });